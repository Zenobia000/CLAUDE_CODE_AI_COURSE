# TDD 最佳實踐檢查清單

## 📋 完整檢查清單

使用這個檢查清單確保你的 TDD 實踐符合最佳標準。每完成一個 TDD 循環都建議進行自我檢查。

---

## 🔴 RED 階段檢查

### 測試撰寫品質

#### ✅ 測試意圖清晰
```
□ 測試名稱清楚描述要驗證的行為
  ❌ test_user()
  ✅ test_user_can_register_with_valid_email()

□ 測試只驗證一個行為
  ❌ 一個測試檢查註冊、登入、權限
  ✅ 分別測試註冊、登入、權限

□ 測試使用 AAA 模式（Arrange-Act-Assert）
  ✅ 清楚分離設置、執行、驗證
```

#### ✅ 測試邏輯正確
```
□ 測試真的會失敗（執行確認為紅色）
□ 失敗原因符合預期（找不到模組/方法，而非邏輯錯誤）
□ 測試的輸入和輸出都合理
□ 邊界情況考慮充分
```

#### ✅ 測試結構合理
```
□ 測試程式碼比實作程式碼更易讀
□ 測試資料簡單且有代表性
□ 避免測試中的複雜邏輯
□ 測試獨立性（不依賴其他測試）
```

### 測試範圍控制

#### ✅ 適當的測試粒度
```
□ 每次只寫一個測試
□ 測試範圍剛好覆蓋下一個功能
□ 不一次寫完整個功能的所有測試
□ 測試的複雜度與當前階段匹配
```

#### ✅ 合理的預期設定
```
□ 期望的 API 設計合理且直觀
□ 方法和類別命名符合慣例
□ 參數和返回值設計恰當
□ 錯誤處理方式清晰
```

---

## 🟢 GREEN 階段檢查

### 實作品質

#### ✅ 最簡實作原則
```
□ 使用最簡單的方式讓測試通過
□ 沒有實作測試未要求的功能（YAGNI）
□ 避免過早優化
□ 可以暫時寫「醜陋」的程式碼
```

#### ✅ 實作正確性
```
□ 所有測試都通過（包括之前的測試）
□ 實作邏輯符合測試期望
□ 沒有隱藏的副作用
□ 錯誤處理符合測試要求
```

#### ✅ 程式碼基本品質
```
□ 命名清晰且符合慣例
□ 程式碼結構合理
□ 沒有明顯的 bug
□ 基本的程式設計原則（如單一職責）
```

### 進度確認

#### ✅ 執行驗證
```
□ 所有測試執行成功（綠色）
□ 測試執行時間合理（< 1 秒 for unit tests）
□ 沒有 warning 或 error 訊息
□ 覆蓋率統計正常
```

#### ✅ 功能完整性
```
□ 當前迭代的功能完全實作
□ 邊界情況得到正確處理
□ 錯誤情況按預期響應
□ 與現有功能整合正常
```

---

## 🔵 REFACTOR 階段檢查

### 重構時機判斷

#### ✅ 重構需求識別
```
□ 程式碼有明顯的重複（DRY 原則）
□ 命名可以更清晰
□ 結構可以更合理
□ 複雜度可以降低
□ 測試程式碼也需要重構
```

#### ✅ 重構安全性
```
□ 重構前所有測試都通過
□ 有足夠的測試覆蓋保護
□ 重構範圍明確且有限
□ 準備好快速回退方案
```

### 重構執行

#### ✅ 重構過程控制
```
□ 小步進行重構
□ 每次修改後立即執行測試
□ 一次只做一種類型的重構
□ 保持重構的原子性
```

#### ✅ 重構結果驗證
```
□ 所有測試依然通過
□ 沒有改變外部行為
□ 程式碼品質確實提升
□ 沒有引入新的複雜性
```

---

## 📊 整體 TDD 流程檢查

### 循環完整性

#### ✅ 流程遵循度
```
□ 嚴格遵循 Red-Green-Refactor 順序
□ 沒有跳過任何階段
□ 每個階段都有明確的產出
□ 循環節奏適中（15-30 分鐘/次）
```

#### ✅ 迭代進展
```
□ 每個循環都有實質進展
□ 功能逐步建構完整
□ 複雜度漸進增加
□ 保持可工作的程式碼狀態
```

### 測試組織

#### ✅ 測試檔案結構
```
□ 測試檔案命名清晰（test_*.py）
□ 測試按功能模組組織
□ 相關測試放在同一檔案
□ 測試類別分組合理
```

#### ✅ 測試維護性
```
□ 測試程式碼易於閱讀
□ 測試資料管理良好（fixtures）
□ 重複程式碼適當提取
□ 測試文檔充分
```

---

## 🎯 品質指標檢查

### 測試覆蓋率

#### ✅ 覆蓋率統計
```
□ 行覆蓋率 ≥ 90%
□ 分支覆蓋率 ≥ 80%
□ 函數覆蓋率 = 100%
□ 關鍵業務邏輯 = 100%
```

#### ✅ 覆蓋率品質
```
□ 高覆蓋率來自有意義的測試
□ 沒有為了覆蓋率而寫無意義測試
□ 邊界情況和錯誤路徑都有覆蓋
□ 整合測試補充單元測試不足
```

### 測試效能

#### ✅ 執行效率
```
□ 單元測試執行時間 < 1 秒
□ 完整測試套件 < 30 秒
□ 測試並行執行正常
□ 沒有不必要的外部依賴
```

#### ✅ 測試穩定性
```
□ 測試結果可重複
□ 沒有隨機失敗的測試
□ 測試在不同環境下一致
□ 測試順序不影響結果
```

---

## 🚨 常見問題檢查

### 反模式識別

#### ❌ 避免的 TDD 反模式
```
□ 先寫實作再補測試
□ 一次寫太多測試
□ 測試過於複雜
□ 測試依賴外部系統
□ 為了覆蓋率而測試
□ 測試實作細節而非行為
□ 忽略重構階段
```

#### ❌ 避免的測試反模式
```
□ 神秘的測試資料
□ 過度的 mock 使用
□ 測試之間的依賴
□ 沒有斷言的測試
□ 測試邏輯過於複雜
□ 重複的測試設置
□ 不清晰的錯誤訊息
```

### 程式碼異味檢查

#### ⚠️ 需要注意的程式碼異味
```
□ 重複程式碼（測試和實作都要檢查）
□ 過長的方法或類別
□ 複雜的條件邏輯
□ 深層的繼承結構
□ 過多的參數
□ 神奇數字和字串
```

---

## 📈 改進建議

### 個人技能提升

#### 🎯 技能發展檢查
```
□ TDD 節奏越來越自然
□ 測試設計能力提升
□ 重構技巧更熟練
□ 程式設計思維改善
□ 能夠指導他人
```

#### 🎯 知識擴展
```
□ 學習新的測試技巧
□ 了解不同測試框架
□ 研究測試設計模式
□ 關注 TDD 社群動態
□ 閱讀相關書籍文章
```

### 團隊實踐改進

#### 👥 團隊協作
```
□ 團隊 TDD 標準一致
□ 程式碼審查包含測試
□ 共享 TDD 最佳實踐
□ 定期回顧和改進
□ 新人 TDD 培訓完善
```

---

## 🔧 工具和自動化

### 開發工具檢查

#### ⚙️ IDE 和工具配置
```
□ IDE 支援自動執行測試
□ 程式碼覆蓋率視覺化
□ 自動格式化和 linting
□ 快速跳轉測試和實作
□ 重構工具使用熟練
```

#### ⚙️ CI/CD 整合
```
□ 提交前自動執行測試
□ 測試失敗阻止合併
□ 覆蓋率報告自動生成
□ 測試效能監控
□ 測試結果通知
```

---

## 📝 使用建議

### 檢查頻率

- **每個 TDD 循環後**：快速檢查核心項目
- **每日結束時**：完整檢查當日成果
- **每週回顧時**：深度檢查和改進計劃
- **專案里程碑**：全面評估和標準更新

### 評分系統

```
🟢 優秀（90-100%）：符合大部分最佳實踐
🟡 良好（70-89%）：基本符合，有改進空間
🟠 需改進（50-69%）：存在明顯問題
🔴 不合格（<50%）：需要重新學習基礎
```

### 行動計劃

基於檢查結果制定具體的改進計劃：
1. 識別最需要改進的 3 個方面
2. 制定具體的行動步驟
3. 設定改進時間表
4. 定期檢查進展

---

**記住：檢查清單是指導，不是教條**
**根據專案實際情況靈活調整標準**
**持續改進比完美執行更重要！**