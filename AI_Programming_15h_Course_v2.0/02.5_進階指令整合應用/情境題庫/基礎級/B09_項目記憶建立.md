# B09：專案記憶建立 - CLAUDE.md 與知識累積

## 🎯 學習目標

**知識目標**：
- [ ] 理解專案記憶（CLAUDE.md）的重要性
- [ ] 掌握知識累積和傳承的方法
- [ ] 了解團隊協作中的知識管理

**技能目標**：
- [ ] 能建立和維護專案記憶檔案
- [ ] 能設計知識累積的工作流程
- [ ] 能使用 `/memory` 指令進行知識管理

**時間估計**：25-30 分鐘

---

## 📋 情境描述

### 背景故事
你剛接手一個複雜的 Web 應用專案，但前任開發者沒有留下完整的文檔。專案有許多隱含的設計決策、特殊配置、和重要的開發知識。你需要在理解專案的同時，建立完整的專案記憶系統，確保後續開發者能快速上手。

### 問題陳述
面臨的挑戰：
1. 專案架構複雜，缺乏整體說明
2. 有很多隱含的業務邏輯和設計決策
3. 配置檔案眾多，缺乏說明
4. 開發過程中的重要決策沒有記錄
5. 需要建立可持續的知識管理機制

傳統問題：
- 知識散落在各處
- 重要決策口耳相傳
- 新人上手困難
- 重複犯同樣錯誤

### 任務要求
1. 分析現有專案，萃取重要知識
2. 建立結構化的專案記憶檔案
3. 設計知識累積和更新機制
4. 展示專案記憶在實際開發中的應用

---

## 🛠️ 實作步驟

### 步驟 1：準備專案環境

**模擬專案結構**：
```bash
# 創建測試專案
mkdir complex_web_project
cd complex_web_project

# 創建專案檔案
mkdir -p {src/{api,web,shared},config,docs,tests,scripts}
```

**核心檔案內容**：

**src/api/main.py**：
```python
# API 主程式 - 使用特殊的認證機制
from fastapi import FastAPI, Depends
from .auth import SpecialAuthenticator  # 自訂認證
from .database import DatabaseManager

app = FastAPI()

# 重要：這個專案使用雙重認證機制
# 1. JWT token (標準)
# 2. IP 白名單 (特殊需求：客戶要求)
auth = SpecialAuthenticator(
    secret_key="proj_secret_2024",  # 注意：每年更換
    whitelist_file="./config/ip_whitelist.txt"
)

# 資料庫連接池配置（重要：不要超過20個連接）
db = DatabaseManager(max_connections=15)  # 客戶 DB 限制

@app.get("/api/health")
async def health_check():
    return {"status": "ok", "auth": "dual"}
```

**config/database.yml**：
```yaml
# 資料庫配置 - 注意特殊設定
production:
  host: "prod-db.client.com"
  port: 5432
  database: "client_app"
  # 重要：這個客戶的DB有特殊字符集
  charset: "utf8mb4_unicode_ci"
  # 注意：必須使用 SSL
  ssl_mode: "require"
  # 特殊：查詢超時設為30秒（客戶要求）
  query_timeout: 30

staging:
  host: "staging-db.client.com"
  port: 5432
  database: "client_app_staging"
  charset: "utf8mb4_unicode_ci"
```

**scripts/deploy.sh**：
```bash
#!/bin/bash
# 部署腳本 - 有特殊步驟

# 重要：必須先停止舊服務（客戶環境特殊性）
sudo systemctl stop client-app

# 特殊：需要清除 Redis 快取（業務邏輯要求）
redis-cli FLUSHALL

# 資料庫遷移（注意：需要特殊權限）
python manage.py migrate --settings=production

# 重要：重新生成 IP 白名單（每次部署必須）
python scripts/update_whitelist.py

# 啟動服務
sudo systemctl start client-app
```

### 步驟 2：初始化專案記憶

```bash
claude --add-dir ./complex_web_project
```

**提示詞**：
```
我需要為這個複雜的 Web 專案建立完整的專案記憶系統。

請首先分析整個專案，識別：

1. 架構特點和設計模式
2. 特殊的配置和業務邏輯
3. 重要的技術決策
4. 開發和部署的關鍵資訊
5. 潛在的風險點和注意事項

然後初始化專案記憶：
/init

請開始分析並建立基礎的專案記憶。
```

### 步驟 3：建立結構化的 CLAUDE.md

**提示詞**：
```
基於剛才的分析，請創建完整的 CLAUDE.md 檔案，包含：

[專案概述]
- 專案目標和背景
- 主要技術棧
- 架構設計概述

[重要決策記錄]
- 為什麼使用雙重認證？
- 資料庫連接數限制的原因
- 部署流程中特殊步驟的原因

[開發指南]
- 本地開發環境設置
- 常用開發指令
- 測試策略

[部署指南]
- 部署前檢查清單
- 特殊配置說明
- 故障排除指南

[業務邏輯說明]
- 關鍵業務流程
- 特殊業務規則
- 客戶特殊需求

[維護筆記]
- 定期維護任務
- 常見問題解決方案
- 聯絡人資訊

請創建完整且實用的 CLAUDE.md。
```

### 步驟 4：展示記憶使用

**情境 1：新功能開發**
**提示詞**：
```
現在我要為這個專案添加一個新的用戶管理功能。

請基於 CLAUDE.md 中的專案記憶：
1. 確認新功能是否符合現有架構
2. 識別需要注意的特殊配置
3. 提供實作建議，確保符合專案規範
4. 提醒相關的部署注意事項

這展示了專案記憶如何指導新功能開發。
```

**情境 2：問題排查**
**提示詞**：
```
假設生產環境出現了資料庫連接超時的問題。

請基於專案記憶：
1. 分析可能的原因（考慮專案特殊配置）
2. 提供排查步驟
3. 建議解決方案
4. 更新記憶檔案，記錄這次問題和解決方案

展示專案記憶如何協助問題解決。
```

### 步驟 5：記憶更新和維護

**提示詞**：
```
現在演示如何維護和更新專案記憶：

[場景：完成用戶管理功能開發]
請使用 /memory 指令，將以下資訊加入專案記憶：

1. 新增功能說明
- 用戶管理模組的架構設計
- 與現有認證系統的整合方式
- 新增的 API 端點說明

2. 開發過程中的重要發現
- 發現的配置問題和解決方案
- 效能優化點
- 測試策略調整

3. 部署更新
- 新功能的部署檢查項目
- 資料庫遷移步驟
- 監控指標更新

請展示如何系統性地更新專案記憶。
```

### 步驟 6：團隊知識分享

**提示詞**：
```
最後，請基於建立的專案記憶，生成以下團隊共享資料：

[新人入職指南]
- 專案快速理解指南
- 開發環境設置步驟
- 第一個任務建議

[開發者手冊]
- 常用指令參考
- 程式碼風格指南
- 最佳實踐清單

[運維手冊]
- 部署標準流程
- 監控和警報設置
- 緊急情況處理流程

展示如何將專案記憶轉化為團隊資產。
```

---

## ✅ 成功檢查點

完成此情境後，你應該能夠：

**理解檢查點**：
- [ ] 我理解專案記憶的重要性和價值
- [ ] 我知道如何結構化地記錄專案知識
- [ ] 我明白知識累積和傳承的方法

**技能檢查點**：
- [ ] 我能建立完整的 CLAUDE.md 檔案
- [ ] 我能使用 `/memory` 指令管理知識
- [ ] 我能設計知識更新和維護流程

**應用檢查點**：
- [ ] 我建立了可用的專案記憶系統
- [ ] 我展示了記憶在實際開發中的應用
- [ ] 我設計了團隊知識分享機制

---

## 🎓 學習收穫

### 核心概念
1. **專案記憶**：不只是文檔，而是活的知識系統
2. **知識累積**：每次開發都應該增加團隊智慧
3. **知識傳承**：讓重要知識不隨人員流動而流失

### CLAUDE.md 的價值

| 傳統文檔 | CLAUDE.md |
|---------|-----------|
| 靜態說明 | 動態記憶 |
| 分散儲存 | 集中管理 |
| 手動維護 | AI 輔助 |
| 難以檢索 | 智能應用 |

### 知識管理層次
```
Level 1: 基本文檔（說明書）
Level 2: 結構化知識（CLAUDE.md）
Level 3: 智能記憶（AI 輔助）
Level 4: 自動化應用（工作流程整合）
```

### 團隊效益
- **新人上手時間**：從 2 週縮短到 3 天
- **重複問題**：減少 80%
- **決策品質**：有歷史脈絡參考
- **知識流失**：防止人員異動的影響

---

## 🚀 進階挑戰

### 挑戰 1：多專案記憶管理
**提示詞**：
```
設計一個多專案的知識管理系統：

[挑戰]
- 管理 5+ 個不同類型的專案
- 識別跨專案的共同模式
- 建立共享知識庫
- 設計知識複用機制

[要求]
- 專案間知識關聯
- 最佳實踐萃取
- 經驗教訓共享
- 技術債務追蹤

展示企業級的知識管理系統。
```

### 挑戰 2：知識品質保證
**提示詞**：
```
建立知識品質保證機制：

[品質維度]
- 準確性：資訊是否正確
- 完整性：是否涵蓋關鍵點
- 時效性：是否及時更新
- 可用性：是否易於理解和應用

[保證機制]
- 知識審查流程
- 定期更新檢查
- 使用效果追蹤
- 持續改進機制

設計可持續的知識品質保證系統。
```

### 挑戰 3：智能知識助手
**提示詞**：
```
開發智能知識助手系統：

[功能需求]
- 主動知識提醒
- 情境相關建議
- 學習進度追蹤
- 知識缺口識別

[技術實現]
- 知識圖譜建立
- 相似情境匹配
- 個人化推薦
- 自動知識更新

打造下一代的專案知識管理系統。
```

---

## 📚 相關資源

**知識管理理論**：
- [組織學習理論](https://en.wikipedia.org/wiki/Organizational_learning)
- [知識螺旋理論](https://en.wikipedia.org/wiki/Knowledge_spiral)
- [實踐社群](https://en.wikipedia.org/wiki/Community_of_practice)

**工具和方法**：
- [Decision Records](https://adr.github.io/) - 架構決策記錄
- [Team Playbooks](https://about.gitlab.com/handbook/) - 團隊手冊
- [Knowledge Bases](https://www.atlassian.com/software/confluence) - 知識庫

**最佳實踐**：
- [Documentation as Code](https://www.writethedocs.org/guide/docs-as-code/)
- [Living Documentation](https://leanpub.com/livingdocumentation)

---

## 💭 反思問題

1. **投資回報**：建立專案記憶的成本 vs 長期收益如何？
2. **維護挑戰**：如何確保專案記憶不會過時或不準確？
3. **團隊文化**：如何培養團隊成員主動貢獻知識的習慣？
4. **技術演進**：專案記憶系統如何適應技術和團隊的變化？

---

## 🔗 基礎級情境總結

**B01-B09 技能累積軌跡**：

```
B01: Agent 基礎 (code-reviewer)
  ↓
B02: 輸出風格 (documentation-writer + api-documentation)
  ↓
B03: 測試生成 (test-generator) [既有]
  ↓
B04: 安全審查 (security-auditor)
  ↓
B05: 效能分析 (performance-analyzer)
  ↓
B06: MCP 整合 (檔案系統、網路搜尋)
  ↓
B07: 指令組合 (Agent + MCP 協作)
  ↓
B08: 跨領域應用 (知識管理)
  ↓
B09: 知識累積 (專案記憶)
```

**核心能力建立**：
- ✅ 單一 Agent 使用
- ✅ 輸出風格控制
- ✅ MCP 工具整合
- ✅ 簡單工作流程設計
- ✅ 跨領域應用思維
- ✅ 知識管理系統

---

## 🎯 進入組合級的準備

完成 B09 後，你已經具備了：
1. **工具掌握度**：熟悉主要 Agents 和 MCP
2. **組合思維**：理解如何組合使用不同功能
3. **應用廣度**：不只程式開發，還有知識管理
4. **系統思維**：能設計完整的工作流程

**下一步**：
- C01-C30：組合級情境（1-2.5 小時/題）
- 更複雜的多步驟工作流程
- 企業級應用場景
- 團隊協作工作流程

---

**完成時間記錄**：___ 分鐘
**CLAUDE.md 章節數量**：___
**最有價值的記憶內容**：___
**筆記區域**：
```
記錄你對專案記憶和知識管理的理解...
```

---

*本情境完成了基礎級的最後一個重要概念：知識累積。專案記憶不只是文檔，而是團隊智慧的結晶。*