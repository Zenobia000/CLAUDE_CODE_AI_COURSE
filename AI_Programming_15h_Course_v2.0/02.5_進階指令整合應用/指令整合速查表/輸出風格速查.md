# 輸出風格速查表

## 🎨 輸出風格概述

輸出風格（Output Style）是 Claude Code 確保產出一致性和專業性的重要機制，讓 AI 能按照預定格式和標準生成內容。

---

## 🚀 快速啟動

### 基本輸出風格指令
```bash
/output-style:api-documentation     # API 文檔格式
/output-style:code-review-report    # 程式碼審查報告
/output-style:security-report       # 安全審查報告
/output-style:technical-blog        # 技術部落格格式
/output-style:tutorial              # 教學文件格式
/output-style:off                   # 關閉特定風格
```

### 風格狀態查詢
```bash
/output-style                       # 列出所有可用風格
/output-style:current              # 查看當前使用的風格
/output-style:help [style-name]    # 查看特定風格說明
```

---

## 📋 內建輸出風格詳解

### 📚 api-documentation (API 文檔格式)

**適用場景**：
- REST API 文檔生成
- GraphQL API 說明
- SDK 使用文檔
- 接口規格書

**格式特點**：
- OpenAPI/Swagger 風格結構
- 清晰的端點分類
- 完整的請求/回應範例
- 錯誤碼說明

**使用範例**：
```bash
/agents:documentation-writer
/output-style:api-documentation

"為這個 FastAPI 應用生成完整的 API 文檔"
```

**預期輸出結構**：
```markdown
# API Documentation

## Authentication
[認證方式說明]

## Base URL
`https://api.example.com/v1`

## Endpoints

### GET /users
**Description**: 獲取用戶列表

**Parameters**:
| Name | Type | Required | Description |
|------|------|----------|-------------|
| page | integer | No | 頁碼 (預設: 1) |
| limit | integer | No | 每頁筆數 (預設: 20) |

**Response** (200 OK):
```json
{
  "users": [...],
  "pagination": {...}
}
```

**Error Responses**:
- 400: Bad Request
- 401: Unauthorized
- 500: Internal Server Error
```

---

### 🔍 code-review-report (程式碼審查報告)

**適用場景**：
- PR 審查報告
- 程式碼品質評估
- 重構前評估
- 團隊程式碼審查

**格式特點**：
- 問題嚴重程度分級
- 結構化問題描述
- 具體修改建議
- 整體評估摘要

**使用範例**：
```bash
/agents:code-reviewer
/output-style:code-review-report

"審查這個 Python 模組的程式碼品質"
```

**預期輸出結構**：
```markdown
# Code Review Report

## Executive Summary
- Total issues found: X
- Critical: X | High: X | Medium: X | Low: X
- Overall code quality: [Grade A-F]

## Critical Issues

### 1. SQL Injection Vulnerability
**File**: `user_service.py:42`
**Severity**: Critical
**Description**: Direct string concatenation in SQL query
**Code**:
```python
query = f"SELECT * FROM users WHERE id = {user_id}"
```
**Recommendation**: Use parameterized queries
**Fix**:
```python
query = "SELECT * FROM users WHERE id = %s"
cursor.execute(query, (user_id,))
```

## Recommendations
1. Implement immediate fixes for Critical issues
2. Address High priority items in next sprint
3. Consider refactoring for Medium issues

## Metrics
- Cyclomatic complexity: Average X, Max X
- Test coverage: X%
- Technical debt: X hours estimated
```

---

### 🔒 security-report (安全審查報告)

**適用場景**：
- 安全漏洞評估
- 滲透測試報告
- 合規性檢查
- 安全配置審查

**格式特點**：
- OWASP 標準分類
- 風險等級評估
- 詳細的攻擊向量說明
- 具體修復步驟

**使用範例**：
```bash
/agents:security-auditor
/output-style:security-report

"對這個 Web 應用進行全面安全審計"
```

**預期輸出結構**：
```markdown
# Security Audit Report

## Executive Summary
**Assessment Date**: 2025-01-15
**Application**: Web Application v2.1
**Risk Level**: HIGH

### Risk Distribution
- Critical: 2 issues
- High: 4 issues
- Medium: 6 issues
- Low: 3 issues

## Vulnerability Details

### V001: SQL Injection (Critical)
**OWASP Category**: A03 - Injection
**CVSS Score**: 9.1 (Critical)
**Location**: `/api/users` endpoint
**Description**: User input directly concatenated into SQL queries

**Attack Vector**:
```
POST /api/users
{"username": "admin'; DROP TABLE users; --"}
```

**Impact**:
- Complete database compromise
- Data theft/loss
- Privilege escalation

**Remediation**:
1. Implement parameterized queries
2. Add input validation
3. Use ORM frameworks
4. Implement WAF rules

**Timeline**: Fix immediately (0-1 days)

## Compliance Status
- OWASP Top 10: 7/10 compliant
- ISO 27001: Partial compliance
- GDPR: Requires attention

## Recommendations
1. **Immediate (0-3 days)**
   - Fix Critical vulnerabilities
   - Implement emergency patches

2. **Short-term (1-4 weeks)**
   - Address High-risk issues
   - Security training for developers

3. **Long-term (1-3 months)**
   - Implement security SDLC
   - Regular security assessments
```

---

### 📝 technical-blog (技術部落格格式)

**適用場景**：
- 技術文章撰寫
- 教學內容創作
- 技術分享文章
- 開發心得記錄

**格式特點**：
- SEO 友好結構
- 引人入勝的開頭
- 清晰的段落組織
- 實用的程式碼範例

**使用範例**：
```bash
/agents:documentation-writer
/output-style:technical-blog

"撰寫一篇關於 Python 異步程式設計的技術文章"
```

**預期輸出結構**：
```markdown
# Python 異步程式設計：從入門到精通

## 前言
你是否曾經為了 Python 程式的執行效率而苦惱？是否想要讓你的程式能夠同時處理多個任務？
今天我們就來探討 Python 異步程式設計的奧秘...

## 什麼是異步程式設計？
[概念解釋 + 圖解]

## 為什麼需要異步？
### 傳統同步的問題
```python
# 同步方式 - 效率低下
import time

def download_file(url):
    time.sleep(2)  # 模擬網路延遲
    return f"Downloaded {url}"

# 依序下載，總時間 = 6 秒
for url in ["url1", "url2", "url3"]:
    result = download_file(url)
    print(result)
```

### 異步的優勢
```python
# 異步方式 - 高效並行
import asyncio

async def download_file_async(url):
    await asyncio.sleep(2)  # 異步等待
    return f"Downloaded {url}"

# 並行下載，總時間 ≈ 2 秒
async def main():
    urls = ["url1", "url2", "url3"]
    tasks = [download_file_async(url) for url in urls]
    results = await asyncio.gather(*tasks)
    for result in results:
        print(result)
```

## 實戰案例：Web API 並行請求
[詳細實作範例]

## 常見陷阱與解決方案
[問題分析 + 解決方法]

## 最佳實踐建議
1. 什麼時候使用異步？
2. 如何選擇異步框架？
3. 性能調優技巧

## 總結
異步程式設計不是銀彈，但在正確的場景下能顯著提升程式效能...

## 延伸閱讀
- [Python asyncio 官方文檔]
- [異步程式設計模式]
- [效能測試與分析]

---
**標籤**: #Python #異步程式設計 #效能優化 #Web開發
**字數**: 約 2,500 字
**閱讀時間**: 10 分鐘
```

---

### 📖 tutorial (教學文件格式)

**適用場景**：
- 逐步教學指南
- 安裝配置說明
- 快速入門指南
- 操作手冊

**格式特點**：
- 分步驟指導
- 清晰的檢查點
- 故障排除說明
- 完整的範例

**使用範例**：
```bash
/agents:documentation-writer
/output-style:tutorial

"撰寫 Docker 入門教學指南"
```

**預期輸出結構**：
```markdown
# Docker 入門教學指南

## 📋 前置需求
開始之前，請確保你的系統符合以下要求：
- [ ] 作業系統：Windows 10+, macOS 10.14+, 或 Linux
- [ ] RAM：至少 4GB（建議 8GB）
- [ ] 儲存空間：至少 5GB 可用空間

## 🎯 學習目標
完成本教學後，你將能夠：
- [ ] 理解 Docker 的基本概念
- [ ] 安裝和配置 Docker
- [ ] 執行你的第一個容器
- [ ] 建立自訂的 Docker 映像

## 步驟 1：安裝 Docker

### Windows 用戶
1. 前往 [Docker Desktop 官網](https://docker.com/products/docker-desktop)
2. 下載 Docker Desktop for Windows
3. 執行安裝程式並遵循指示

### macOS 用戶
1. 前往 [Docker Desktop 官網](https://docker.com/products/docker-desktop)
2. 下載 Docker Desktop for Mac
3. 拖拽到 Applications 資料夾

### Linux 用戶
```bash
# Ubuntu/Debian
curl -fsSL https://get.docker.com -o get-docker.sh
sudo sh get-docker.sh

# 將用戶加入 docker 群組
sudo usermod -aG docker $USER
```

**✅ 檢查點 1**：驗證安裝
```bash
docker --version
# 預期輸出：Docker version 24.0.x, build xxxxx
```

## 步驟 2：執行第一個容器

### Hello World 容器
```bash
docker run hello-world
```

**預期輸出**：
```
Hello from Docker!
This message shows that your installation appears to be working correctly...
```

**✅ 檢查點 2**：確認容器正常執行

### 互動式容器
```bash
# 執行 Ubuntu 容器
docker run -it ubuntu:latest /bin/bash

# 在容器內執行命令
root@container-id:/# ls
root@container-id:/# exit
```

## 步驟 3：管理容器

### 查看容器
```bash
# 查看執行中的容器
docker ps

# 查看所有容器（包含已停止）
docker ps -a
```

### 停止和移除容器
```bash
# 停止容器
docker stop <container-id>

# 移除容器
docker rm <container-id>
```

**✅ 檢查點 3**：能夠管理容器生命週期

## 步驟 4：建立自訂映像

### 創建 Dockerfile
```dockerfile
# Dockerfile
FROM python:3.9-slim

WORKDIR /app

COPY requirements.txt .
RUN pip install -r requirements.txt

COPY . .

CMD ["python", "app.py"]
```

### 建立映像
```bash
docker build -t my-app:v1.0 .
```

### 執行自訂映像
```bash
docker run -p 8080:8080 my-app:v1.0
```

**✅ 檢查點 4**：成功建立並執行自訂映像

## 🔧 故障排除

### 常見問題 1：權限問題 (Linux)
**症狀**：`permission denied while trying to connect to the Docker daemon`
**解決方案**：
```bash
sudo usermod -aG docker $USER
newgrp docker
```

### 常見問題 2：容器無法啟動
**症狀**：`docker: Error response from daemon`
**解決方案**：
1. 檢查映像名稱是否正確
2. 檢查端口是否被佔用
3. 查看詳細錯誤：`docker logs <container-id>`

## 🎓 下一步學習
- [ ] Docker Compose 多容器應用
- [ ] Docker 網路管理
- [ ] 容器資料持久化
- [ ] Docker 安全最佳實踐

## 📚 參考資源
- [Docker 官方文檔](https://docs.docker.com/)
- [Docker Hub](https://hub.docker.com/)
- [最佳實踐指南](https://docs.docker.com/develop/best-practices/)

---
**預計完成時間**：30-45 分鐘
**難度等級**：初級
**最後更新**：2025年1月
```

---

## 🎨 自訂輸出風格

### 建立自訂風格
```bash
# 創建風格定義檔案
# ~/.claude/output-styles/my-custom-style.yaml

name: project-report
description: 專案進度報告格式
category: reporting

template: |
  # {{project_name}} 專案報告

  ## 📊 執行摘要
  **報告期間**: {{date_range}}
  **專案狀態**: {{status}}
  **完成度**: {{completion_percentage}}%

  ## 🎯 本期成果
  {{achievements}}

  ## 🚧 進行中工作
  {{ongoing_work}}

  ## ⚠️ 風險與問題
  {{risks_and_issues}}

  ## 📅 下期計畫
  {{next_period_plan}}

  ## 📈 關鍵指標
  | 指標 | 目標 | 實際 | 達成率 |
  |------|------|------|--------|
  {{kpi_table}}

parameters:
  - project_name: string
  - date_range: string
  - status: enum [進行中, 延遲, 完成]
  - completion_percentage: number
```

### 使用自訂風格
```bash
/output-style:project-report

"生成本週專案進度報告"
```

---

## 🔄 風格組合使用

### Agent + 輸出風格組合
```bash
# 文檔撰寫 + API 格式
/agents:documentation-writer
/output-style:api-documentation
"為用戶管理系統生成 API 文檔"

# 安全審查 + 安全報告格式
/agents:security-auditor
/output-style:security-report
"對支付系統進行安全審計"

# 程式碼審查 + 審查報告格式
/agents:code-reviewer
/output-style:code-review-report
"審查這個 PR 的程式碼品質"
```

### 多階段風格切換
```bash
# 第一階段：技術分析
/agents:performance-analyzer
/output-style:technical-blog
"分析系統效能瓶頸並寫成技術文章"

# 第二階段：實施指南
/output-style:tutorial
"基於分析結果，提供優化實施教學"

# 第三階段：團隊報告
/output-style:project-report
"生成效能優化專案報告"
```

---

## ⚠️ 常見問題與解決方案

### 問題 1：輸出格式不符合預期
**可能原因**：
- 風格選擇不當
- 提示詞不夠具體
- 內容複雜度超出風格範圍

**解決方案**：
```bash
# 1. 確認當前風格
/output-style:current

# 2. 提供更具體的指令
"請按照 API 文檔標準格式，包含..."

# 3. 分階段處理複雜內容
"先生成概述，再詳細展開每個部分"
```

### 問題 2：風格與內容不匹配
**解決方案**：
```bash
# 內容驅動風格選擇
API 文檔 → /output-style:api-documentation
技術文章 → /output-style:technical-blog
教學指南 → /output-style:tutorial
安全報告 → /output-style:security-report
```

### 問題 3：需要混合多種風格
**解決方案**：
```bash
# 分段處理
"第一部分使用教學格式，第二部分使用 API 文檔格式"

# 或使用自訂風格
/output-style:custom-mixed-format
```

---

## 📊 風格效果對比

| 風格類型 | 一致性 | 專業度 | 可讀性 | 適用場景 |
|---------|--------|--------|--------|---------|
| api-documentation | 99% | 很高 | 高 | API 相關 |
| code-review-report | 95% | 很高 | 高 | 程式碼審查 |
| security-report | 98% | 很高 | 中 | 安全評估 |
| technical-blog | 85% | 中 | 很高 | 技術分享 |
| tutorial | 90% | 中 | 很高 | 教學指導 |
| 無風格 | 60% | 低 | 中 | 一般對話 |

---

## 🎯 輸出風格最佳實踐

### 1. 選擇合適的風格
```bash
❌ 用 tutorial 格式寫 API 文檔
✅ 用 api-documentation 格式寫 API 文檔

❌ 用 security-report 格式寫教學
✅ 用 tutorial 格式寫教學指南
```

### 2. 組合使用 Agent 和風格
```bash
# 最佳組合
documentation-writer + api-documentation
security-auditor + security-report
code-reviewer + code-review-report
```

### 3. 提供充足的上下文
```bash
❌ "生成文檔"
✅ "為這個 REST API 生成完整的使用文檔，包含認證、端點、錯誤處理"
```

### 4. 驗證輸出品質
```bash
# 檢查要點
- 格式是否一致
- 內容是否完整
- 專業術語是否正確
- 範例是否可執行
```

---

**最後更新**：2025年1月
**版本**：v1.0
**維護者**：Claude Code 課程團隊

---

## 🔗 相關速查表

- [Agent使用速查](./Agent使用速查.md) - Agent 專家系統
- [MCP配置速查](./MCP配置速查.md) - 工具整合
- [常用組合模式](./常用組合模式.md) - 工作流程範本
- [問題排查速查](./問題排查速查.md) - 故障診斷