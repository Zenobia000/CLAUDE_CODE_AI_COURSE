# B02ï¼šç”¨æˆ¶èº«ä»½é™ç•Œä¸Šä¸‹æ–‡

## ğŸ“‹ æƒ…å¢ƒèƒŒæ™¯

**å…¬å¸**: TechStart Inc.
**å°ˆæ¡ˆ**: ä¼æ¥­ç´šèº«ä»½èªè­‰èˆ‡æˆæ¬Šç³»çµ±ï¼ˆIAM - Identity and Access Managementï¼‰
**åœ˜éšŠè¦æ¨¡**: 5 äººé–‹ç™¼åœ˜éšŠ
**ç•¶å‰éšæ®µ**: æ¶æ§‹è¨­è¨ˆéšæ®µ

### æ¥­å‹™èƒŒæ™¯

å…¬å¸æ­£åœ¨é–‹ç™¼ä¸€å€‹ä¼æ¥­ç´š SaaS å¹³å°ï¼Œéœ€è¦ä¸€å€‹ç¨ç«‹çš„èº«ä»½èªè­‰èˆ‡æˆæ¬Šç³»çµ±ï¼Œä¾›å¤šå€‹æ¥­å‹™ç³»çµ±ï¼ˆè¨‚å–®ç³»çµ±ã€CRMã€ERP ç­‰ï¼‰å…±ç”¨ã€‚

ç³»çµ±éœ€è¦æ”¯æ´ï¼š
- å¤šç¨®èªè­‰æ–¹å¼ï¼ˆå¯†ç¢¼ã€OAuthã€SAMLï¼‰
- ç´°ç²’åº¦çš„æ¬Šé™æ§åˆ¶ï¼ˆRBAC - Role-Based Access Controlï¼‰
- å¤šç§Ÿæˆ¶éš”é›¢
- å¯©è¨ˆæ—¥èªŒ

**ä½ çš„ä»»å‹™**ï¼šç‚ºç”¨æˆ¶èº«ä»½ä¸Šä¸‹æ–‡ï¼ˆUser Identity Contextï¼‰å»ºç«‹ DDD é ˜åŸŸæ¨¡å‹ã€‚

---

## ğŸ¯ ä»»å‹™ç›®æ¨™

ä½¿ç”¨ AI è¼”åŠ©å®Œæˆä»¥ä¸‹ç”¢å‡ºï¼š

- [ ] é€šç”¨èªè¨€è©å½™è¡¨
- [ ] äº‹ä»¶é¢¨æš´åœ–ï¼ˆMermaidï¼‰
- [ ] èšåˆè¨­è¨ˆï¼ˆé‡é»ï¼šUser èšåˆçš„è¨­è¨ˆï¼‰
- [ ] é ˜åŸŸæ¨¡å‹é¡åœ–ï¼ˆMermaidï¼‰
- [ ] æ ¸å¿ƒèšåˆçš„ Python ç¨‹å¼ç¢¼å¯¦ç¾

---

## ğŸ“ æ¥­å‹™éœ€æ±‚

### æ ¸å¿ƒåŠŸèƒ½

#### 1. ç”¨æˆ¶è¨»å†Šèˆ‡ç®¡ç†
- ç”¨æˆ¶å¯ä»¥ä½¿ç”¨é›»å­éƒµä»¶æˆ–æ‰‹æ©Ÿè™Ÿè¨»å†Š
- ç”¨æˆ¶éœ€è¦é©—è­‰é›»å­éƒµä»¶æˆ–æ‰‹æ©Ÿè™Ÿ
- ç”¨æˆ¶å¯ä»¥è¨­å®šå¯†ç¢¼ï¼ˆéœ€ç¬¦åˆè¤‡é›œåº¦è¦æ±‚ï¼‰
- ç”¨æˆ¶å¯ä»¥å•Ÿç”¨/ç¦ç”¨å¸³è™Ÿ
- ç”¨æˆ¶å¯ä»¥åˆªé™¤å¸³è™Ÿï¼ˆè»Ÿåˆªé™¤ï¼Œä¿ç•™å¯©è¨ˆè¨˜éŒ„ï¼‰

#### 2. èªè­‰æ–¹å¼
- **å¯†ç¢¼èªè­‰**: ä½¿ç”¨é›»å­éƒµä»¶/æ‰‹æ©Ÿè™Ÿ + å¯†ç¢¼ç™»å…¥
- **OAuth èªè­‰**: æ”¯æ´ Googleã€GitHubã€Microsoft ç­‰ç¬¬ä¸‰æ–¹ç™»å…¥
- **SAML èªè­‰**: æ”¯æ´ä¼æ¥­ç´š SSOï¼ˆSingle Sign-Onï¼‰
- **MFAï¼ˆå¤šå› ç´ èªè­‰ï¼‰**: å¯é¸å•Ÿç”¨ TOTP æˆ– SMS é©—è­‰ç¢¼

#### 3. è§’è‰²èˆ‡æ¬Šé™
- ç”¨æˆ¶å¯ä»¥è¢«åˆ†é…å¤šå€‹è§’è‰²ï¼ˆRoleï¼‰
- è§’è‰²åŒ…å«å¤šå€‹æ¬Šé™ï¼ˆPermissionï¼‰
- æ¬Šé™æ ¼å¼ï¼š`resource:action`ï¼ˆä¾‹å¦‚ï¼š`order:create`ã€`user:read`ï¼‰
- æ”¯æ´è§’è‰²ç¹¼æ‰¿ï¼ˆå¦‚ï¼šAdmin ç¹¼æ‰¿ User çš„æ‰€æœ‰æ¬Šé™ï¼‰

#### 4. å¯†ç¢¼ç®¡ç†
- å¯†ç¢¼è¤‡é›œåº¦è¦æ±‚ï¼šè‡³å°‘ 8 å€‹å­—ç¬¦ï¼ŒåŒ…å«å¤§å°å¯«å­—æ¯ã€æ•¸å­—ã€ç‰¹æ®Šç¬¦è™Ÿ
- å¯†ç¢¼éœ€è¦é›œæ¹Šå­˜å„²ï¼ˆbcrypt æˆ– argon2ï¼‰
- æ”¯æ´å¯†ç¢¼é‡ç½®ï¼ˆé€šéé›»å­éƒµä»¶ç™¼é€é‡ç½®é€£çµï¼‰
- å¯†ç¢¼æ­·å²è¨˜éŒ„ï¼ˆä¸èƒ½ä½¿ç”¨æœ€è¿‘ 3 æ¬¡çš„å¯†ç¢¼ï¼‰

#### 5. æœƒè©±ç®¡ç†
- ç”¨æˆ¶ç™»å…¥å¾Œå‰µå»ºæœƒè©±ï¼ˆSessionï¼‰
- æœƒè©±æœ‰æ•ˆæœŸï¼š30 åˆ†é˜ç„¡æ“ä½œè‡ªå‹•éæœŸ
- æ”¯æ´å–®é»ç™»å‡ºï¼ˆLogoutï¼‰
- æ”¯æ´å¼·åˆ¶ç™»å‡ºæ‰€æœ‰æœƒè©±

#### 6. å¯©è¨ˆæ—¥èªŒ
- è¨˜éŒ„ç”¨æˆ¶çš„é—œéµæ“ä½œï¼š
  - è¨»å†Šã€ç™»å…¥ã€ç™»å‡º
  - å¯†ç¢¼ä¿®æ”¹ã€å¯†ç¢¼é‡ç½®
  - è§’è‰²è®Šæ›´ã€æ¬Šé™è®Šæ›´
  - å¸³è™Ÿå•Ÿç”¨/ç¦ç”¨/åˆªé™¤

---

### æ¥­å‹™è¦å‰‡

| è¦å‰‡ ID | æè¿° |
|---------|------|
| BR-001 | é›»å­éƒµä»¶å’Œæ‰‹æ©Ÿè™Ÿåœ¨ç³»çµ±ä¸­å¿…é ˆå”¯ä¸€ |
| BR-002 | æœªé©—è­‰çš„ç”¨æˆ¶ä¸èƒ½ç™»å…¥ç³»çµ± |
| BR-003 | å¯†ç¢¼éŒ¯èª¤æ¬¡æ•¸è¶…é 5 æ¬¡ï¼Œå¸³è™Ÿé–å®š 15 åˆ†é˜ |
| BR-004 | ç¦ç”¨çš„å¸³è™Ÿç„¡æ³•ç™»å…¥ |
| BR-005 | å¯†ç¢¼ä¸èƒ½èˆ‡æœ€è¿‘ 3 æ¬¡çš„å¯†ç¢¼ç›¸åŒ |
| BR-006 | æœƒè©±æœ‰æ•ˆæœŸç‚º 30 åˆ†é˜ï¼Œå¯é€šéæ´»å‹•å»¶é•· |
| BR-007 | MFA å•Ÿç”¨å¾Œï¼Œç™»å…¥å¿…é ˆé€šé MFA é©—è­‰ |
| BR-008 | åˆªé™¤å¸³è™Ÿä¸æœƒçœŸæ­£åˆªé™¤æ•¸æ“šï¼Œåªæ¨™è¨˜ç‚ºå·²åˆªé™¤ï¼ˆè»Ÿåˆªé™¤ï¼‰|

---

### ä½¿ç”¨è€…æ•…äº‹

**Story 1: ç”¨æˆ¶è¨»å†Š**
```
ä½œç‚ºä¸€å€‹æ–°ç”¨æˆ¶
æˆ‘æƒ³è¦ä½¿ç”¨é›»å­éƒµä»¶è¨»å†Šå¸³è™Ÿ
ä¸¦æ”¶åˆ°é©—è­‰éƒµä»¶
ä»¥ä¾¿æˆ‘å¯ä»¥é–‹å§‹ä½¿ç”¨ç³»çµ±
```

**Story 2: å¯†ç¢¼ç™»å…¥**
```
ä½œç‚ºä¸€å€‹å·²è¨»å†Šç”¨æˆ¶
æˆ‘æƒ³è¦ä½¿ç”¨é›»å­éƒµä»¶å’Œå¯†ç¢¼ç™»å…¥
ä»¥ä¾¿è¨ªå•ç³»çµ±è³‡æº
```

**Story 3: å•Ÿç”¨ MFA**
```
ä½œç‚ºä¸€å€‹å®‰å…¨æ„è­˜é«˜çš„ç”¨æˆ¶
æˆ‘æƒ³è¦å•Ÿç”¨å¤šå› ç´ èªè­‰
ä»¥ä¾¿å¢å¼·å¸³è™Ÿå®‰å…¨æ€§
```

**Story 4: åˆ†é…è§’è‰²**
```
ä½œç‚ºç³»çµ±ç®¡ç†å“¡
æˆ‘æƒ³è¦ç‚ºç”¨æˆ¶åˆ†é…è§’è‰²
ä»¥ä¾¿æ§åˆ¶ç”¨æˆ¶çš„è¨ªå•æ¬Šé™
```

**Story 5: æŸ¥çœ‹å¯©è¨ˆæ—¥èªŒ**
```
ä½œç‚ºå®‰å…¨å¯©è¨ˆå“¡
æˆ‘æƒ³è¦æŸ¥çœ‹ç”¨æˆ¶çš„æ“ä½œæ—¥èªŒ
ä»¥ä¾¿è¿½è¹¤å¯ç–‘è¡Œç‚º
```

---

## ğŸ”§ æŠ€è¡“è¦æ±‚

- **èªè¨€**: Python 3.11+
- **è¼¸å‡ºæ ¼å¼**:
  - é€šç”¨èªè¨€è©å½™è¡¨: Markdown
  - äº‹ä»¶é¢¨æš´åœ–: Mermaid Flowchart
  - é ˜åŸŸæ¨¡å‹é¡åœ–: Mermaid Class Diagram
  - ç¨‹å¼ç¢¼: Pythonï¼ˆä½¿ç”¨ dataclassesã€type hintsï¼‰

---

## ğŸ“š å­¸ç¿’é‡é»

æœ¬æƒ…å¢ƒé‡é»å­¸ç¿’ï¼š

### 1. èšåˆè¨­è¨ˆ
- **User èšåˆ**æ‡‰è©²åŒ…å«å“ªäº›å…§å®¹ï¼Ÿ
- å¯†ç¢¼ã€è§’è‰²ã€æœƒè©±æ˜¯å¦æ‡‰è©²åœ¨ User èšåˆå…§ï¼Ÿ
- å¦‚ä½•è¨­è¨ˆèšåˆé‚Šç•Œä»¥ä¿æŒä¸€è‡´æ€§ï¼Ÿ

### 2. å€¼å°è±¡è¨­è¨ˆ
- Emailã€Phoneã€Password æ‡‰è©²è¨­è¨ˆç‚ºå€¼å°è±¡é‚„æ˜¯ç°¡å–®å­—ä¸²ï¼Ÿ
- å€¼å°è±¡å¦‚ä½•å°è£æ¥­å‹™è¦å‰‡ï¼ˆå¦‚å¯†ç¢¼è¤‡é›œåº¦ï¼‰ï¼Ÿ

### 3. é ˜åŸŸäº‹ä»¶
- ç”¨æˆ¶ç”Ÿå‘½é€±æœŸä¸­æœ‰å“ªäº›é—œéµäº‹ä»¶ï¼Ÿ
- å“ªäº›äº‹ä»¶éœ€è¦ç™¼å¸ƒçµ¦å…¶ä»–ä¸Šä¸‹æ–‡ï¼Ÿ

### 4. å®‰å…¨æ€§è€ƒé‡
- å¯†ç¢¼å­˜å„²ï¼ˆé›œæ¹Šã€åŠ é¹½ï¼‰
- æœƒè©±ç®¡ç†ï¼ˆtokenã€éæœŸï¼‰
- å¯©è¨ˆæ—¥èªŒï¼ˆGDPR åˆè¦ï¼‰

---

## â±ï¸ æ™‚é–“å®‰æ’

å»ºè­°æ™‚é–“åˆ†é…ï¼š

- **éšæ®µ 1**: é€šç”¨èªè¨€æå–ï¼ˆ10 åˆ†é˜ï¼‰
- **éšæ®µ 2**: äº‹ä»¶é¢¨æš´ï¼ˆ10 åˆ†é˜ï¼‰
- **éšæ®µ 3**: èšåˆè¨­è¨ˆï¼ˆ10 åˆ†é˜ï¼‰
- **éšæ®µ 4**: é ˜åŸŸæ¨¡å‹è¨­è¨ˆï¼ˆ5 åˆ†é˜ï¼‰
- **éšæ®µ 5**: ç¨‹å¼ç¢¼å¯¦ç¾ï¼ˆ10 åˆ†é˜ï¼‰

**ç¸½è¨ˆ**: 45 åˆ†é˜

---

## âœ… æª¢æŸ¥é»

### éšæ®µ 1: é€šç”¨èªè¨€è©å½™è¡¨
- [ ] è­˜åˆ¥å‡ºæ ¸å¿ƒé ˜åŸŸæ¦‚å¿µï¼ˆUser, Role, Permission, Session, Credential ç­‰ï¼‰
- [ ] å€åˆ†å¯¦é«”èˆ‡å€¼å°è±¡
- [ ] æå–æ¥­å‹™è¦å‰‡

### éšæ®µ 2: äº‹ä»¶é¢¨æš´
- [ ] è­˜åˆ¥ç”¨æˆ¶è¨»å†Šæµç¨‹çš„æ‰€æœ‰äº‹ä»¶
- [ ] è­˜åˆ¥ç™»å…¥/ç™»å‡ºæµç¨‹çš„æ‰€æœ‰äº‹ä»¶
- [ ] æ¨™è¨˜å“ªäº›äº‹ä»¶éœ€è¦ç™¼å¸ƒçµ¦å…¶ä»–ä¸Šä¸‹æ–‡

### éšæ®µ 3: èšåˆè¨­è¨ˆ
- [ ] ç¢ºå®š User èšåˆçš„é‚Šç•Œï¼ˆæ˜¯å¦åŒ…å« Sessionã€Roleï¼Ÿï¼‰
- [ ] è¨­è¨ˆèšåˆæ ¹çš„ä¸è®Šå¼
- [ ] ç¢ºå®šèšåˆå…§çš„å¯¦é«”èˆ‡å€¼å°è±¡

### éšæ®µ 4: é ˜åŸŸæ¨¡å‹è¨­è¨ˆ
- [ ] ç¹ªè£½ User èšåˆçš„é¡åœ–
- [ ] è¨­è¨ˆä¸»è¦çš„å€¼å°è±¡ï¼ˆEmail, Password, Phoneï¼‰
- [ ] è¨­è¨ˆé ˜åŸŸäº‹ä»¶

### éšæ®µ 5: ç¨‹å¼ç¢¼å¯¦ç¾
- [ ] å¯¦ç¾ User èšåˆæ ¹
- [ ] å¯¦ç¾æ ¸å¿ƒå€¼å°è±¡
- [ ] å¯¦ç¾é—œéµæ¥­å‹™è¦å‰‡ï¼ˆå¯†ç¢¼è¤‡é›œåº¦ã€å¸³è™Ÿé–å®šç­‰ï¼‰
- [ ] å¯¦ç¾é ˜åŸŸäº‹ä»¶

---

## ğŸ’¡ æç¤º

### æç¤º 1: èšåˆé‚Šç•Œè¨­è¨ˆ

**é—œéµå•é¡Œ**: Sessionï¼ˆæœƒè©±ï¼‰æ‡‰è©²åœ¨ User èšåˆå…§é‚„æ˜¯ç¨ç«‹èšåˆï¼Ÿ

**æ–¹æ¡ˆ A**: Session åœ¨ User èšåˆå…§
```
User (èšåˆæ ¹)
  â”œâ”€ Email (å€¼å°è±¡)
  â”œâ”€ Password (å€¼å°è±¡)
  â”œâ”€ Roles (å¯¦é«”åˆ—è¡¨)
  â””â”€ Sessions (å¯¦é«”åˆ—è¡¨)  â† åœ¨èšåˆå…§
```

**å„ªé»**: å¯ä»¥ä¿è­‰äº‹å‹™ä¸€è‡´æ€§ï¼ˆç”¨æˆ¶ç¦ç”¨æ™‚ï¼Œç«‹å³æ¸…é™¤æ‰€æœ‰æœƒè©±ï¼‰
**ç¼ºé»**: èšåˆéå¤§ï¼Œé«˜ä¸¦ç™¼æ™‚æ€§èƒ½å•é¡Œ

**æ–¹æ¡ˆ B**: Session ç¨ç«‹èšåˆ
```
User (èšåˆæ ¹)          Session (èšåˆæ ¹)
  â”œâ”€ Email               â”œâ”€ UserId (å¼•ç”¨)
  â”œâ”€ Password            â”œâ”€ Token
  â””â”€ Roles               â””â”€ ExpiresAt
```

**å„ªé»**: èšåˆè·è²¬å–®ä¸€ï¼Œæ€§èƒ½æ›´å¥½
**ç¼ºé»**: ç”¨æˆ¶ç¦ç”¨èˆ‡æœƒè©±æ¸…é™¤ä¸åœ¨åŒä¸€äº‹å‹™ï¼Œéœ€è¦äº‹ä»¶é©…å‹•è™•ç†

**æ¨è–¦**: æ–¹æ¡ˆ Bï¼ˆé€šéé ˜åŸŸäº‹ä»¶ä¿è­‰æœ€çµ‚ä¸€è‡´æ€§ï¼‰

---

### æç¤º 2: å€¼å°è±¡è¨­è¨ˆ

**Email å€¼å°è±¡ç¯„ä¾‹**:
```python
@dataclass(frozen=True)
class Email:
    value: str

    def __post_init__(self):
        if not self._is_valid_email(self.value):
            raise ValueError(f"ç„¡æ•ˆçš„é›»å­éƒµä»¶: {self.value}")

    @staticmethod
    def _is_valid_email(email: str) -> bool:
        import re
        pattern = r'^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$'
        return bool(re.match(pattern, email))
```

**Password å€¼å°è±¡ç¯„ä¾‹**:
```python
@dataclass(frozen=True)
class Password:
    hashed_value: str  # å­˜å„²é›œæ¹Šå¾Œçš„å€¼ï¼Œä¸å­˜å„²æ˜æ–‡

    @classmethod
    def from_plain_text(cls, plain_password: str) -> 'Password':
        cls._validate_complexity(plain_password)
        hashed = bcrypt.hashpw(plain_password.encode(), bcrypt.gensalt())
        return cls(hashed_value=hashed.decode())

    @staticmethod
    def _validate_complexity(password: str) -> None:
        if len(password) < 8:
            raise ValueError("å¯†ç¢¼è‡³å°‘éœ€è¦ 8 å€‹å­—ç¬¦")
        # å…¶ä»–è¤‡é›œåº¦æª¢æŸ¥...

    def verify(self, plain_password: str) -> bool:
        return bcrypt.checkpw(plain_password.encode(),
                             self.hashed_value.encode())
```

---

### æç¤º 3: é—œéµæ¥­å‹™è¦å‰‡

**å¸³è™Ÿé–å®šé‚è¼¯**:
```python
class User:
    def __init__(self):
        self.failed_login_attempts = 0
        self.locked_until: Optional[datetime] = None

    def record_login_failure(self) -> None:
        self.failed_login_attempts += 1
        if self.failed_login_attempts >= 5:
            self.locked_until = datetime.now() + timedelta(minutes=15)
            self._add_domain_event(UserAccountLocked(user_id=self.user_id))

    def is_locked(self) -> bool:
        if self.locked_until is None:
            return False
        if datetime.now() > self.locked_until:
            self.failed_login_attempts = 0  # é–å®šæœŸéå¾Œé‡ç½®
            self.locked_until = None
            return False
        return True
```

---

## ğŸ“– åƒè€ƒè§£ç­”

<details>
<summary>é»æ“ŠæŸ¥çœ‹åƒè€ƒè§£ç­”ï¼ˆå»ºè­°å…ˆç¨ç«‹å®Œæˆï¼‰</summary>

### æ ¸å¿ƒè¨­è¨ˆæ±ºç­–

1. **èšåˆåŠƒåˆ†**:
   - `User` èšåˆï¼šç”¨æˆ¶è³‡è¨Šã€èªè­‰æ†‘è­‰ã€è§’è‰²
   - `Session` ç¨ç«‹èšåˆï¼šæœƒè©±ç®¡ç†
   - `AuditLog` ç¨ç«‹èšåˆï¼šå¯©è¨ˆæ—¥èªŒ

2. **é—œéµå€¼å°è±¡**:
   - `Email`: å°è£é›»å­éƒµä»¶é©—è­‰
   - `Phone`: å°è£æ‰‹æ©Ÿè™Ÿé©—è­‰
   - `Password`: å°è£å¯†ç¢¼é›œæ¹Šèˆ‡é©—è­‰
   - `UserId`: ç”¨æˆ¶å”¯ä¸€æ¨™è­˜

3. **é ˜åŸŸäº‹ä»¶**:
   - `UserRegistered`: ç”¨æˆ¶è¨»å†ŠæˆåŠŸ
   - `UserEmailVerified`: é›»å­éƒµä»¶é©—è­‰æˆåŠŸ
   - `UserLoggedIn`: ç”¨æˆ¶ç™»å…¥
   - `UserAccountLocked`: å¸³è™Ÿè¢«é–å®š
   - `UserRolesChanged`: ç”¨æˆ¶è§’è‰²è®Šæ›´

### èšåˆè¨­è¨ˆåœ–

```mermaid
classDiagram
    class User {
        <<Aggregate Root>>
        +UserId user_id
        +Email email
        +Phone phone
        +Password password
        +UserStatus status
        +bool is_verified
        +int failed_login_attempts
        +datetime locked_until
        +List~Role~ roles
        +register()
        +verify_email()
        +change_password()
        +assign_role()
        +lock_account()
    }

    class Email {
        <<Value Object>>
        +str value
        +validate()
    }

    class Password {
        <<Value Object>>
        +str hashed_value
        +from_plain_text()
        +verify()
    }

    class Role {
        <<Entity>>
        +RoleId role_id
        +str name
        +List~Permission~ permissions
    }

    class Permission {
        <<Value Object>>
        +str resource
        +str action
    }

    User *-- Email
    User *-- Password
    User *-- Role
    Role *-- Permission
```

### å®Œæ•´ç¨‹å¼ç¢¼å¯¦ç¾

åƒè€ƒ `ç¯„ä¾‹æ¨¡å‹/è¨‚å–®ç³»çµ±/domain-model.py` çš„çµæ§‹ï¼Œå¯¦ç¾ User èšåˆã€‚

</details>

---

## ğŸ¤” åæ€å•é¡Œ

å®Œæˆå¾Œæ€è€ƒï¼š

1. **èšåˆé‚Šç•Œ**:
   - ç‚ºä»€éº¼ Session ä¸æ‡‰è©²åœ¨ User èšåˆå…§ï¼Ÿ
   - å¦‚æœéœ€æ±‚æ”¹ç‚ºã€Œç”¨æˆ¶ç¦ç”¨æ™‚å¿…é ˆç«‹å³æ¸…é™¤æ‰€æœ‰æœƒè©±ã€ï¼Œè¨­è¨ˆå¦‚ä½•èª¿æ•´ï¼Ÿ

2. **å€¼å°è±¡ vs å¯¦é«”**:
   - Role æ‡‰è©²æ˜¯å¯¦é«”é‚„æ˜¯å€¼å°è±¡ï¼Ÿç‚ºä»€éº¼ï¼Ÿ
   - å¦‚æœ Role å¯ä»¥å‹•æ…‹ä¿®æ”¹æ¬Šé™ï¼Œè¨­è¨ˆå¦‚ä½•èª¿æ•´ï¼Ÿ

3. **å®‰å…¨æ€§**:
   - å¯†ç¢¼é›œæ¹Šæ‡‰è©²åœ¨é ˜åŸŸå±¤é‚„æ˜¯åŸºç¤è¨­æ–½å±¤ï¼Ÿ
   - å¦‚ä½•é˜²æ­¢æ™‚åºæ”»æ“Šï¼ˆTiming Attackï¼‰ï¼Ÿ

4. **äº‹ä»¶é©…å‹•**:
   - å“ªäº›æ“ä½œæ‡‰è©²ç™¼å¸ƒé ˜åŸŸäº‹ä»¶ï¼Ÿ
   - `UserLoggedIn` äº‹ä»¶æ‡‰è©²åŒ…å«å“ªäº›ä¿¡æ¯ï¼Ÿ

---

**æƒ…å¢ƒç‰ˆæœ¬**: v1.0
**é›£åº¦**: ä¸­ç­‰
**é ä¼°æ™‚é–“**: 30-45 åˆ†é˜
**æ ¸å¿ƒæŠ€èƒ½**: èšåˆè¨­è¨ˆã€å€¼å°è±¡è¨­è¨ˆã€æ¥­å‹™è¦å‰‡å°è£
