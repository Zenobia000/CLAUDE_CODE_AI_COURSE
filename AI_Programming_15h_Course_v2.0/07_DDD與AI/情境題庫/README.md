# DDD 與 AI 情境題庫

## 📋 題庫概述

本題庫包含 10 個精心設計的情境問題，涵蓋從基礎到複雜的 DDD 領域建模場景。所有情境都強調 AI 輔助的工作流程。

**學習建議**：
- 初學者：從基礎級開始，完成 2-3 題
- 進階者：直接挑戰組合級，選擇感興趣的業務場景
- 專家級：挑戰複雜級，體驗大型系統建模

---

## 🎯 題庫結構

### Level 1：基礎級（4 題）

單一限界上下文的領域建模，適合初學者。

| 題號 | 標題 | 業務場景 | 預估時間 | 核心技能 |
|------|------|---------|---------|---------|
| B01 | [訂單系統 DDD 建模](基礎級/B01_訂單系統DDD建模.md) | 電商訂單 | 45-60 分鐘 | 完整 5 階段流程 |
| B02 | 用戶身份限界上下文 | 身份認證 | 30-45 分鐘 | 聚合設計 |
| B03 | 支付領域模型設計 | 支付處理 | 30-45 分鐘 | 值對象設計 |
| B04 | 庫存管理聚合設計 | 庫存扣減 | 30-45 分鐘 | 併發處理 |

**學習重點**：
- 掌握 AI 輔助 DDD 的 5 個階段
- 理解聚合根的設計原則
- 學會設計值對象
- 理解領域事件的使用

---

### Level 2：組合級（5 題）

多個限界上下文的複雜系統建模。

| 題號 | 標題 | 業務場景 | 預估時間 | 核心技能 |
|------|------|---------|---------|---------|
| C01 | 電商平台上下文地圖 | 完整電商系統 | 1.5-2 小時 | 上下文劃分 |
| C02 | 訂閱服務領域重構 | SaaS 訂閱 | 1.5-2 小時 | 遺留系統重構 |
| C03 | 多租戶 SaaS 建模 | 企業 SaaS | 2-2.5 小時 | 多租戶設計 |
| C04 | 社交平台事件風暴 | 社交網路 | 1.5-2 小時 | 事件驅動 |
| C05 | 物流系統限界上下文 | 物流配送 | 1.5-2 小時 | 複雜流程建模 |

**學習重點**：
- 掌握限界上下文劃分技巧
- 理解上下文地圖模式
- 學會處理上下文間通訊
- 應對複雜業務流程

---

### Level 3：複雜級（1 題）

大型企業系統的微服務架構設計。

| 題號 | 標題 | 業務場景 | 預估時間 | 核心技能 |
|------|------|---------|---------|---------|
| E01 | 企業 ERP 微服務架構設計 | 完整 ERP 系統 | 5-8 小時 | 架構設計、團隊協作 |

**學習重點**：
- 用 DDD 劃分微服務邊界
- 設計防腐層處理遺留系統
- 處理分散式事務
- 設計事件驅動架構

---

## 📊 難度說明

### 基礎級特徵
- ✅ 單一限界上下文
- ✅ 業務邏輯相對簡單
- ✅ 聚合邊界清晰
- ✅ 完整的參考解答
- ✅ 詳細的 AI 對話範例

**適合對象**：
- 第一次接觸 DDD
- 想快速體驗 AI 輔助 DDD 流程
- 需要建立信心

### 組合級特徵
- ✅ 多個限界上下文
- ✅ 上下文之間有複雜互動
- ✅ 需要權衡設計取捨
- ✅ 提供多種方案對比
- ⚠️ 參考解答不是唯一正解

**適合對象**：
- 已完成基礎級練習
- 需要處理真實複雜場景
- 想理解上下文劃分技巧

### 複雜級特徵
- ✅ 大型系統（10+ 限界上下文）
- ✅ 涉及組織架構與團隊協作
- ✅ 需要處理遺留系統
- ✅ 需要設計演進策略
- ⚠️ 沒有標準答案，只有權衡

**適合對象**：
- 架構師或 Tech Lead
- 需要設計企業級系統
- 想挑戰大型專案建模

---

## 🎓 使用指南

### 情境題的標準結構

每個情境題都包含：

```markdown
# 情境標題

## 📋 情境背景
業務場景描述，包含公司背景、業務目標

## 🎯 任務目標
明確的交付成果清單

## 📝 業務需求
詳細的需求文檔，包含：
- 使用者故事
- 業務流程
- 業務規則

## 🔧 技術要求
- 使用的技術棧（Python/TypeScript）
- 輸出格式（Mermaid、程式碼）

## 📚 學習重點
本情境要學習的核心技能

## ⏱️ 時間安排
建議的時間分配

## ✅ 檢查點
分階段的自我檢查清單

## 💡 提示
遇到困難時的提示

## 📖 參考解答
完整的參考解答，包含：
- 通用語言詞彙表
- 事件風暴圖
- 上下文地圖
- 領域模型
- 程式碼實現

## 🤔 反思問題
完成後的反思問題
```

### 如何使用情境題

**步驟 1：閱讀情境背景**
- 理解業務場景
- 明確任務目標
- 不要急著看參考解答

**步驟 2：嘗試獨立完成**
- 按照 5 個階段工作流程
- 使用 AI 輔助（不要純手工）
- 記錄遇到的問題

**步驟 3：檢查自己的產出**
- 對照檢查點清單
- 確認每個階段的產出

**步驟 4：對比參考解答**
- 找出差異
- 理解不同方案的優缺點
- 思考為什麼參考解答這樣設計

**步驟 5：反思與總結**
- 回答反思問題
- 記錄學到的經驗
- 更新自己的 DDD 知識庫

---

## 📈 推薦學習路徑

### 路徑 A：快速體驗（1-2 小時）

**目標**：快速理解 AI 輔助 DDD 的價值

```
1. 完成 B01（訂單系統）- 60 分鐘
   └─ 跟著參考解答一步步操作
   └─ 體驗完整的 5 階段流程

2. 嘗試 B02（用戶身份）- 30 分鐘
   └─ 獨立完成，不看參考解答
   └─ 完成後對比差異
```

### 路徑 B：系統學習（4-6 小時）

**目標**：掌握不同類型的領域建模

```
1. 基礎級：完成 B01-B04（3 小時）
   └─ 每題獨立完成
   └─ 對比不同領域的建模方式

2. 組合級：選擇 2 題（2-3 小時）
   └─ 選擇與自己工作相關的場景
   └─ 重點練習上下文劃分

3. 總結：整理學習筆記（30 分鐘）
   └─ 提煉自己的建模模式
   └─ 建立領域建模檢查清單
```

### 路徑 C：專家挑戰（8-12 小時）

**目標**：具備企業級 DDD 建模能力

```
1. 基礎級：快速過（1 小時）
   └─ 只看參考解答，理解思路

2. 組合級：完成所有 5 題（8 小時）
   └─ 每題都嘗試多種方案
   └─ 對比不同方案的權衡

3. 複雜級：挑戰 E01（8 小時）
   └─ 完整設計一個 ERP 系統
   └─ 模擬真實專案決策過程

4. 應用：為自己的專案建模（4 小時）
   └─ 選擇一個真實業務場景
   └─ 用 AI 輔助建立領域模型
```

---

## 🎯 技能檢查清單

完成情境題後，請檢查自己是否掌握以下技能：

### 階段 1：通用語言提取
- [ ] 能從業務文檔提取核心領域概念
- [ ] 能區分實體、值對象、命令、事件
- [ ] 能識別業務規則與約束
- [ ] 能建立通用語言詞彙表

### 階段 2：事件風暴
- [ ] 能識別完整的業務流程
- [ ] 能標記領域事件的觸發者與訂閱者
- [ ] 能繪製事件流程圖（Mermaid）
- [ ] 能識別異常流程與邊緣情況

### 階段 3：限界上下文識別
- [ ] 能根據業務內聚性劃分上下文
- [ ] 能識別上下文之間的關係（上游/下游）
- [ ] 能設計上下文地圖（Context Map）
- [ ] 能判斷是否需要防腐層

### 階段 4：領域模型設計
- [ ] 能設計聚合根與聚合邊界
- [ ] 能設計值對象
- [ ] 能設計領域事件
- [ ] 能繪製領域模型類圖

### 階段 5：程式碼生成
- [ ] 能生成可執行的程式碼骨架
- [ ] 能撰寫單元測試
- [ ] 能實現業務規則
- [ ] 能整合到實際專案

---

## 💡 常見問題

### Q1：AI 生成的方案不符合實際情況怎麼辦？

**A**：這很正常！AI 只能基於你提供的描述生成方案。

**解決方法**：
1. 補充更詳細的業務描述
2. 明確告訴 AI 哪些地方不對
3. 讓 AI 生成多種方案，你來選擇

**範例**：
```
AI 建議：訂單與支付合併在一個上下文

你的回應：
「我們公司的支付團隊是獨立的，需要對接多個業務線（訂單、訂閱、充值）。
請重新設計，將支付獨立為一個上下文。」
```

### Q2：如何判斷限界上下文劃分是否合理？

**A**：沒有絕對標準，但可以參考這些原則：

**✅ 好的劃分**：
- 上下文內的概念緊密相關
- 上下文之間通過事件或 API 通訊
- 每個上下文可以獨立演化
- 符合團隊組織結構

**❌ 不好的劃分**：
- 上下文之間頻繁的雙向依賴
- 上下文內的概念關聯性低
- 修改一個上下文影響多個其他上下文

### Q3：聚合應該多大？

**A**：聚合儘量小，只包含必須保持一致性的實體。

**經驗法則**：
- 聚合內的實體 ≤ 3 個（通常只有 1 個）
- 聚合的修改操作 ≤ 5 個方法
- 如果聚合太大，考慮拆分

**範例**：
```
❌ 太大的聚合
Order 聚合包含：
- Order（訂單）
- OrderItem（訂單項）
- Payment（支付）     ← 應該是獨立聚合
- Shipment（配貨）    ← 應該是獨立聚合
- Customer（用戶）    ← 應該是引用，不是包含

✅ 合理的聚合
Order 聚合只包含：
- Order（聚合根）
- OrderItem（內部實體）
- 其他用 ID 引用
```

### Q4：值對象和實體如何區分？

**A**：問自己一個問題：「兩個屬性完全相同的物件，是同一個嗎？」

**如果答案是「是」→ 值對象**：
- 例如：100 元就是 100 元（Money）
- 例如：email@example.com 就是這個郵箱（Email）

**如果答案是「不是」→ 實體**：
- 例如：兩個人恰好同名，但不是同一個人（User）
- 例如：兩個訂單金額相同，但不是同一個訂單（Order）

### Q5：一定要用 AI 嗎？手工建模不行嗎？

**A**：當然可以手工建模，但 AI 能大幅提升效率。

**對比**：
| 方式 | 時間 | 適用場景 |
|------|------|---------|
| 手工建模 | 2-5 天 | 團隊工作坊、重要系統 |
| AI 輔助 | 1-2 小時 | 快速驗證、個人學習 |
| AI + 人工 | 半天 | 實際專案（推薦）|

**建議**：
- 學習階段：用 AI 快速迭代
- 實際專案：AI 生成初稿，人工精煉
- 重要系統：AI 輔助 + 團隊評審

---

## 🔗 相關資源

### 理論基礎
- [7.1 DDD 核心概念速覽](../理論/7.1_DDD核心概念速覽.md)
- [7.2 AI 輔助領域建模](../理論/7.2_AI輔助領域建模.md)

### 實作練習
- [練習 1：圖書館系統建模](../實作/練習1_圖書館系統建模/)

### 範例模型
- [訂單系統完整範例](../範例模型/訂單系統/)

### 建模模板
- [DDD 建模模板](../模板/)

---

## 📞 需要幫助？

如果在練習過程中遇到問題：

1. **重讀理論章節**
   - 回到 `7.1` 或 `7.2` 複習概念

2. **查看範例模型**
   - 參考 `範例模型/訂單系統/`

3. **對比參考解答**
   - 找出自己的方案與參考解答的差異
   - 理解為什麼參考解答這樣設計

4. **調整 AI 提示詞**
   - 如果 AI 輸出不理想，嘗試更詳細的描述
   - 參考情境題中的 AI 對話範例

---

## 🏁 開始挑戰

準備好了嗎？選擇一個情境題開始練習：

**推薦起點**：
- 初學者：[B01 訂單系統 DDD 建模](基礎級/B01_訂單系統DDD建模.md)
- 進階者：[C01 電商平台上下文地圖](組合級/C01_電商平台上下文地圖.md)
- 專家級：E01 企業 ERP 微服務架構設計（檔案待建立）

**預計收穫**：
- 1 小時後：能獨立完成單一上下文建模
- 4 小時後：能處理複雜業務的上下文劃分
- 8 小時後：具備企業級 DDD 建模能力

祝你學習順利！

---

**題庫版本**：v1.0
**最後更新**：2025-10-30
**題目數量**：10 題（1 題完整實現，9 題架構）
