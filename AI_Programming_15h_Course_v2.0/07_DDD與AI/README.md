# 模組 7：領域驅動設計（DDD）與 AI

## 📋 模組概述

本模組教你如何用 AI 加速領域驅動設計（DDD），快速完成從業務需求到領域模型的建模過程。

**核心理念**：
> DDD 不是理論堆砌，而是為了解決複雜業務問題。
> 傳統 DDD 需要團隊數天事件風暴，AI 輔助可在 1-2 小時內完成 80% 的建模工作。
> 重點不是學完整的 DDD 理論，而是用 AI 快速建立「夠好」的領域模型。

**學習時長**：1 小時（中等模組）

**適用場景**：
- 需要重構的複雜業務系統
- 新專案的領域建模
- 微服務的限界上下文劃分
- 團隊需要統一通用語言

---

## 🎯 學習目標

完成本模組後，你將能夠：

- ✅ 理解 DDD 核心概念（通用語言、限界上下文、聚合）
- ✅ 掌握 AI 輔助 DDD 的完整工作流程
- ✅ 能用 AI 從業務描述提取通用語言
- ✅ 能用 AI 自動化事件風暴流程
- ✅ 能用 AI 設計領域模型並生成程式碼骨架
- ✅ 理解 DDD 的適用場景與局限性
- ✅ 能為實際專案快速建立領域模型

---

## 📂 模組結構

```
07_DDD與AI/
├── README.md（本文件）
├── 理論/
│   ├── 7.1_DDD核心概念速覽.md（20 分鐘）
│   └── 7.2_AI輔助領域建模.md（40 分鐘）
├── 情境題庫/
│   ├── README.md（題庫導覽）
│   ├── 基礎級/（4 題，30-60 分鐘/題）
│   │   ├── B01_訂單系統DDD建模.md
│   │   ├── B02_用戶身份限界上下文.md
│   │   ├── B03_支付領域模型設計.md
│   │   └── B04_庫存管理聚合設計.md
│   ├── 組合級/（5 題，1.5-3 小時/題）
│   │   ├── C01_電商平台上下文地圖.md
│   │   ├── C02_訂閱服務領域重構.md
│   │   ├── C03_多租戶SaaS建模.md
│   │   ├── C04_社交平台事件風暴.md
│   │   └── C05_物流系統限界上下文.md
│   └── 複雜級/（1 題，5-8 小時/專案）
│       └── E01_企業ERP微服務架構設計.md
├── 實作/
│   └── 練習1_圖書館系統建模/
│       ├── README.md
│       ├── 業務需求.md
│       ├── 使用者故事.md
│       ├── 起始資料/
│       ├── 參考解答/
│       └── 評量標準.md
├── 範例模型/
│   ├── README.md
│   └── 訂單系統/
│       ├── ubiquitous-language.md
│       ├── event-storming.mmd
│       ├── context-map.mmd
│       └── domain-model.py
├── 記憶卡庫/
│   └── README.md（50+ 張記憶卡架構）
└── 作業/
    └── 作業說明.md
```

---

## 📚 學習路徑

### 第 1 步：快速理解 DDD 核心（20 分鐘）

**閱讀**：`理論/7.1_DDD核心概念速覽.md`

**關鍵問題**：
- DDD 到底在解決什麼問題？
- 什麼是通用語言？為什麼重要？
- 限界上下文與微服務有什麼關係？
- 聚合根的作用是什麼？

**學習檢查點**：
- [ ] 能用一個比喻說明 DDD 是什麼
- [ ] 理解為什麼需要通用語言（而不是技術術語）
- [ ] 能識別一個系統的限界上下文邊界
- [ ] 知道 DDD 不適合的場景

**實踐練習**：
- 分析電商訂單系統的通用語言
- 識別訂單系統的限界上下文
- 理解聚合根的設計原則

**估計時間**：20 分鐘

---

### 第 2 步：掌握 AI 輔助 DDD 工作流程（40 分鐘）

**閱讀**：`理論/7.2_AI輔助領域建模.md`

**關鍵問題**：
- AI 如何加速事件風暴流程？
- 如何用 AI 提取通用語言？
- AI 能自動畫上下文地圖嗎？
- AI 生成的領域模型需要人工修正哪些部分？

**學習檢查點**：
- [ ] 理解 AI 輔助 DDD 的 5 個階段
- [ ] 能用 AI 從業務描述提取通用語言
- [ ] 能用 AI 進行事件風暴分析
- [ ] 能用 AI 生成領域模型程式碼骨架
- [ ] 知道 AI 的局限性（無法替代的部分）

**實踐練習**：
- 跟著完整情境示範實作訂單系統建模
- 體驗從需求到程式碼的完整流程
- 對比傳統方法與 AI 輔助的時間差異

**估計時間**：40 分鐘

---

### 第 3 步：實戰練習（可選，1-2 小時）

**選擇路徑**：

#### 路徑 A：基礎練習（適合初學者）
**選擇情境**：`情境題庫/基礎級/B01_訂單系統DDD建模.md`

**目標**：
- 完整走過 AI 輔助 DDD 的 5 個階段
- 產出完整的領域模型
- 生成可執行的程式碼骨架

**估計時間**：1 小時

#### 路徑 B：組合練習（適合進階學習）
**選擇情境**：`情境題庫/組合級/C01_電商平台上下文地圖.md`

**目標**：
- 處理多個限界上下文的複雜系統
- 設計上下文之間的互動模式
- 識別領域事件的流動

**估計時間**：2 小時

#### 路徑 C：實作專案（最完整體驗）
**專案**：`實作/練習1_圖書館系統建模/`

**目標**：
- 從零開始建立完整領域模型
- 產出通用語言詞彙表、事件風暴圖、上下文地圖
- 生成完整的 Python 領域層程式碼

**估計時間**：2 小時

---

## 🎯 學習檢查點

完成本模組後，請確認你能做到：

### 理論理解
- [ ] 能用 3 句話說明 DDD 的核心價值
- [ ] 能解釋通用語言、限界上下文、聚合的關係
- [ ] 理解 DDD 與微服務架構的關係
- [ ] 知道什麼時候該用 DDD，什麼時候不該用

### 技能掌握
- [ ] 能用 AI 從業務文檔提取通用語言詞彙表
- [ ] 能用 AI 進行事件風暴，識別領域事件
- [ ] 能用 AI 設計限界上下文邊界
- [ ] 能用 AI 生成領域模型程式碼（實體、值對象、聚合根）
- [ ] 能畫出上下文地圖（Context Map）

### 實戰應用
- [ ] 能為一個實際業務場景建立完整領域模型（1-2 小時內）
- [ ] 能識別領域模型中的問題並優化
- [ ] 能將領域模型轉換為可執行的程式碼骨架
- [ ] 能評估 AI 生成的領域模型品質

---

## 🚀 進階學習路徑

如果你想更深入學習 DDD：

### 1. 深入領域建模
**推薦資源**：
- Eric Evans 的《領域驅動設計》（經典著作）
- Vaughn Vernon 的《實作領域驅動設計》（實戰手冊）
- DDD 社群（GitHub、Reddit、Medium）

**重點主題**：
- 戰術模式（實體、值對象、服務、工廠、倉儲）
- 戰略模式（限界上下文、上下文地圖、防腐層）
- 領域事件與事件驅動架構

### 2. 微服務與 DDD
**推薦情境**：
- 模組 12：微服務與 AI（如何用 DDD 劃分微服務邊界）
- 情境題庫/複雜級/E01_企業ERP微服務架構設計.md

### 3. 事件驅動架構
**推薦模組**：
- 模組 8：進階資料工作流程（事件溯源與 CQRS）

---

## 📖 與其他模組的關係

```
模組 2.5 進階指令整合應用
    ↓ (提供工具基礎)
模組 4 TDD/BDD 實作
    ↓ (測試驅動思維)
模組 7 DDD 與 AI ← 你在這裡
    ↓ (領域建模方法)
模組 12 微服務與 AI
    ↓ (應用到架構設計)
階段六 企業級整合
```

**前置知識**：
- 模組 2：CLI 工具精通（會使用 Claude Code）
- 模組 4：TDD/BDD（理解測試先行思維）

**後續應用**：
- 模組 8：進階資料工作流程（事件溯源、CQRS）
- 模組 12：微服務與 AI（用 DDD 劃分微服務）

---

## 🔥 本模組亮點

### 1. 時間節省 60-70%
傳統 DDD 事件風暴需要：
- 召集所有領域專家（3-8 人）
- 全天工作坊（8 小時）
- 後續整理與建模（16 小時）
- **總計：24+ 小時**

AI 輔助 DDD：
- 個人與 AI 協作
- 1-2 小時完成核心建模
- 生成程式碼骨架
- **總計：2-3 小時達到 80% 效果**

### 2. 降低學習門檻
傳統 DDD 學習曲線：
- 需要讀完《DDD》原著（600+ 頁）
- 理解複雜的戰術與戰略模式
- 需要實際專案經驗才能掌握

AI 輔助 DDD 學習：
- 1 小時快速理解核心概念
- 透過實作學習，不死記硬背
- AI 扮演「DDD 導師」角色

### 3. 實用導向
本模組不追求理論完整性：
- ❌ 不深入所有 DDD 模式
- ❌ 不討論哲學層面
- ✅ 聚焦最常用的 20% 概念
- ✅ 解決 80% 的實際問題
- ✅ 快速上手，夠用就好

### 4. 完整的中間產出
每個情境都提供完整產出：
- 通用語言詞彙表（Markdown）
- 事件風暴圖（Mermaid）
- 上下文地圖（Mermaid）
- 領域模型類圖（Mermaid）
- 程式碼骨架（Python/TypeScript）

---

## 💡 學習建議

### 給初學者
1. **先快速過理論**（30 分鐘）
   - 不要被 DDD 術語嚇到
   - 重點是理解「為什麼需要」而非「怎麼做」
   - 用比喻和類比理解抽象概念

2. **立刻實作**（30 分鐘）
   - 選一個基礎級情境
   - 跟著步驟用 AI 完整走一遍
   - 體驗「看到」領域模型浮現的感覺

3. **反覆練習**（可選）
   - DDD 是思維模式，需要練習內化
   - 試著為你自己的專案建模
   - 對比傳統設計與 DDD 設計的差異

### 給有經驗者
1. **快速掃過理論**（10 分鐘）
   - 重點看 AI 輔助的部分
   - 理解如何用 AI 加速事件風暴

2. **直接挑戰組合級/複雜級情境**（1-2 小時）
   - 測試 AI 在複雜領域的能力
   - 發現 AI 的邊界與局限
   - 思考如何結合人類判斷與 AI 效率

3. **探索進階應用**
   - 如何用 DDD 劃分微服務
   - 事件驅動架構與 CQRS
   - 多團隊協作的上下文地圖

---

## 🎓 與傳統 DDD 學習的差異

### 傳統 DDD 課程（20-40 小時）
```
第 1-5 小時：理論基礎
├─ DDD 哲學與歷史
├─ 通用語言的重要性
├─ 戰略設計 vs 戰術設計
└─ 限界上下文理論

第 6-15 小時：戰術模式
├─ 實體設計模式
├─ 值對象最佳實踐
├─ 聚合設計原則
├─ 領域服務與應用服務
├─ 工廠模式
└─ 倉儲模式

第 16-30 小時：戰略模式
├─ 限界上下文劃分
├─ 上下文映射
├─ 防腐層
└─ 共享內核

第 31-40 小時：實戰專案
└─ 完整專案實作
```

### AI 輔助 DDD 課程（1 小時核心 + 可選實作）
```
第 1-20 分鐘：核心概念速覽
├─ DDD 是什麼（1 個比喻）
├─ 核心概念（只講最重要的）
└─ 適用場景判斷

第 21-60 分鐘：AI 輔助工作流程
├─ 通用語言提取（AI 協助）
├─ 事件風暴自動化（AI 協助）
├─ 限界上下文識別（AI 協助）
├─ 領域模型設計（AI 協助）
└─ 程式碼生成（AI 協助）

可選實作（1-2 小時）
└─ 完整專案體驗（從需求到程式碼）
```

**差異總結**：
| 面向 | 傳統 DDD | AI 輔助 DDD |
|------|----------|-------------|
| 學習時間 | 20-40 小時 | 1 小時核心 |
| 理論深度 | 完整 DDD 理論體系 | 核心概念（20%） |
| 實作方式 | 團隊工作坊、白板 | 個人與 AI 協作 |
| 產出速度 | 數天（事件風暴）| 1-2 小時（80% 效果）|
| 適合對象 | 架構師、資深開發 | 所有開發者 |
| 學習目標 | 完整掌握 DDD | 快速應用 DDD |

---

## ⚠️ 重要提醒

### DDD 不是銀彈
**適合 DDD 的場景**：
- ✅ 業務邏輯複雜（不是技術複雜）
- ✅ 需要長期維護的系統
- ✅ 團隊需要統一語言
- ✅ 業務規則頻繁變更

**不適合 DDD 的場景**：
- ❌ CRUD 為主的簡單系統
- ❌ 一次性專案或原型
- ❌ 技術複雜但業務簡單
- ❌ 團隊規模太小（1-2 人）

### AI 的局限性
**AI 能做的**：
- ✅ 提取通用語言詞彙
- ✅ 識別領域事件
- ✅ 建議限界上下文邊界
- ✅ 生成程式碼骨架

**AI 不能做的**：
- ❌ 理解業務的真正意圖（需要人類確認）
- ❌ 做出戰略決策（如上下文邊界的取捨）
- ❌ 處理複雜的組織政治與遺留系統
- ❌ 完全替代領域專家的判斷

### 學習心態
1. **不要追求完美**
   - 領域模型是演進的，不是一次定義完成
   - 先求「夠好」，再逐步優化
   - AI 生成的模型是起點，不是終點

2. **實作優先**
   - 不要陷入理論爭論
   - 用實作驗證設計
   - 從錯誤中學習

3. **持續重構**
   - DDD 不是前期設計完就不動
   - 隨著理解深入，持續優化領域模型
   - 用測試保護重構（結合模組 4）

---

## 📞 需要幫助？

如果在學習過程中遇到問題：

1. **概念不清楚**
   - 重讀理論章節，特別是比喻和情境示範
   - 查看範例模型（`範例模型/`）
   - 對比傳統方法與 AI 輔助的差異

2. **AI 生成的模型有問題**
   - 檢查輸入的業務描述是否清晰
   - 確認是否正確使用 AI Agent（`/agents:architect`）
   - 參考情境題庫中的標準對話範例

3. **不知道如何應用到實際專案**
   - 選擇一個小模組開始（不要一開始就重構整個系統）
   - 先建立通用語言詞彙表
   - 逐步引入 DDD 概念

4. **想深入學習**
   - 查看「進階學習路徑」章節
   - 完成複雜級情境題
   - 閱讀推薦的 DDD 經典著作

---

## 📊 學習成果驗證

完成本模組後，你應該能：

### 最小可行技能（1 小時後）
- [ ] 用 AI 為一個業務場景提取通用語言（15 分鐘）
- [ ] 用 AI 進行簡單的事件風暴（20 分鐘）
- [ ] 用 AI 生成基本的領域模型程式碼（25 分鐘）

### 實戰能力（完成實作後）
- [ ] 為真實專案建立完整領域模型（1-2 小時）
- [ ] 識別並劃分限界上下文
- [ ] 設計聚合根與實體
- [ ] 生成可執行的領域層程式碼

### 專家級（可選，深度實作後）
- [ ] 為複雜系統設計上下文地圖
- [ ] 處理多團隊協作的限界上下文
- [ ] 應用 DDD 進行微服務架構設計
- [ ] 評估並優化 AI 生成的領域模型

---

## 🏁 開始學習

準備好了嗎？從這裡開始：

1. **立刻開始**（推薦）
   ```
   第 1 步：閱讀 理論/7.1_DDD核心概念速覽.md（20 分鐘）
   第 2 步：閱讀 理論/7.2_AI輔助領域建模.md（40 分鐘）
   第 3 步：實作 情境題庫/基礎級/B01_訂單系統DDD建模.md（1 小時）
   ```

2. **快速體驗**（最短路徑）
   ```
   直接進入：理論/7.2_AI輔助領域建模.md
   跟著完整情境示範操作（40 分鐘）
   ```

3. **深度學習**（完整體驗）
   ```
   完整閱讀所有理論（1 小時）
   完成 1 個基礎級 + 1 個組合級情境（3 小時）
   實作完整專案（2 小時）
   ```

**下一步**：前往 `理論/7.1_DDD核心概念速覽.md` 開始學習！

---

**模組版本**：v1.0
**最後更新**：2025-10-30
**預估完成時間**：1 小時核心 + 可選 1-2 小時實作
