# 模組 2：CLI 工具精通

## 📋 模組概述

本模組專注於 Claude Code CLI 工具的深度掌握,透過實戰情境建立系統性的工作流程。

**核心理念**:
> 不是記住指令,而是理解在什麼情境下該用什麼工具。
> 就像學 Linux 一樣,透過解決實際問題來自然記住指令組合。

**學習時長**:3.5 小時

---

## 🎯 學習目標

完成本模組後,你將能夠:

- ✅ 完成 Claude Code 環境配置與基本操作
- ✅ 掌握上下文管理策略(--add-dir, /context, /compact, /memory)
- ✅ 使用 EPCV 工作流程進行代碼庫分析與重構
- ✅ 理解顯式上下文管理的優勢與應用時機
- ✅ 建立完整的專案記憶檔案(CLAUDE.md)
- ✅ 在實際場景中自然運用 CLI 指令

---

## 📂 模組結構

```
02_CLI工具精通/
├── README.md(本文件)
├── 理論/
│   ├── 2.1_Claude_Code安裝與配置.md(30分鐘)
│   ├── 2.2_上下文管理與記憶系統.md(60分鐘)
│   ├── 2.3_程式碼庫分析與重構.md(45分鐘)
│   └── 2.4_EPCV工作流程深度解析.md(45分鐘)
├── 實作/
│   ├── 練習1_環境設置與首次任務/
│   └── 練習2_EPCV工作流程實戰/
├── 情境題庫/
│   ├── README.md
│   ├── 基礎級/(8-10個情境)
│   ├── 組合級/(10個情境,已完成)
│   └── 複雜級/(3-5個情境)
├── 記憶卡庫/
│   └── README.md(30-40張情境式記憶卡)
└── 作業/
    └── 作業說明.md
```

---

## 📚 學習路徑

### 第 1 步:環境配置(30 分鐘)

**閱讀**: `理論/2.1_Claude_Code安裝與配置.md`

**關鍵問題**:
- 如何安裝 Claude Code?
- 首次配置需要注意什麼?
- 如何驗證安裝成功?
- 如何處理常見問題?

**學習檢查點**:
- [ ] 成功安裝 Claude Code
- [ ] 完成 API 金鑰配置
- [ ] 通過診斷測試
- [ ] 完成第一個任務(整理檔案)

**實踐練習**:
- 完成實作練習 1:環境設置與首次任務

---

### 第 2 步:上下文管理(60 分鐘)

**閱讀**: `理論/2.2_上下文管理與記憶系統.md`

**關鍵問題**:
- 什麼是顯式上下文管理?
- 如何有效使用 --add-dir?
- /context、/compact、/memory 各自的用途?
- 如何設計專案記憶檔案?

**學習檢查點**:
- [ ] 理解上下文窗口限制(~200K tokens)
- [ ] 掌握 --add-dir 使用技巧
- [ ] 知道何時使用 /compact 壓縮上下文
- [ ] 能建立基本的 CLAUDE.md

**實踐練習**:
- 情境題 S1.1:整理混亂的專案資料夾
- 情境題 S1.2:快速理解陌生專案

---

### 第 3 步:代碼庫分析(45 分鐘)

**閱讀**: `理論/2.3_程式碼庫分析與重構.md`

**關鍵問題**:
- 如何快速理解陌生代碼庫?
- 大型重構如何分階段進行?
- 如何確保重構的安全性?
- 如何驗證重構結果?

**學習檢查點**:
- [ ] 掌握代碼庫探索技巧
- [ ] 理解模組依賴分析方法
- [ ] 知道如何識別重構風險
- [ ] 能設計分階段重構計劃

**實踐練習**:
- 情境題 C02:API 版本遷移(v1 → v2)

---

### 第 4 步:EPCV 工作流程(45 分鐘)

**閱讀**: `理論/2.4_EPCV工作流程深度解析.md`

**關鍵問題**:
- EPCV(探索→規劃→編碼→驗證)四階段如何運作?
- 每個階段的關鍵任務是什麼?
- 如何在各階段使用 Claude Code?
- 如何確保每個階段的品質?

**學習檢查點**:
- [ ] 理解 EPCV 四階段的目的
- [ ] 掌握每個階段的最佳實踐
- [ ] 知道如何在階段間切換
- [ ] 能應用 EPCV 於實際專案

**實踐練習**:
- 完成實作練習 2:EPCV 工作流程實戰
- 情境題 C01:開源專案首次貢獻

---

### 第 5 步:綜合實戰(60 分鐘)

**任務**:完成模組 2 作業

**內容**:
- 任務 1:Claude Code 環境配置與上下文管理(30 分)
- 任務 2:代碼庫分析與重構實戰(40 分)
- 任務 3:EPCV 工作流程完整演練(30 分)

**重點**:
- 整合所有學到的技能
- 在真實場景中應用 EPCV 流程
- 建立完整的專案記憶系統
- 驗證學習成果

---

## 🎓 學習成果

### 理論知識

完成本模組後,你應該能夠:

**關於環境配置**:
- [ ] 正確安裝和配置 Claude Code
- [ ] 處理常見的配置問題
- [ ] 使用診斷工具排查錯誤

**關於上下文管理**:
- [ ] 理解顯式上下文管理的優勢
- [ ] 知道如何控制上下文使用量
- [ ] 能設計完整的 CLAUDE.md
- [ ] 掌握 Memory 系統的使用

**關於 EPCV 流程**:
- [ ] 理解 EPCV 四階段的核心概念
- [ ] 知道每個階段的關鍵任務
- [ ] 能根據專案規模調整流程
- [ ] 理解風險控制機制

---

### 實踐能力

**代碼庫分析能力**:
- [ ] 快速理解陌生代碼庫(< 1 小時)
- [ ] 識別模組依賴關係
- [ ] 評估重構風險
- [ ] 設計分階段實施計劃

**重構執行能力**:
- [ ] 使用 EPCV 流程進行大型重構
- [ ] 確保每個階段有檢查點
- [ ] 驗證重構的正確性
- [ ] 回退處理異常情況

**上下文工程能力**:
- [ ] 為不同規模專案設計上下文策略
- [ ] 建立完整的專案記憶檔案
- [ ] 優化上下文使用效率
- [ ] 持續更新和維護記憶

---

## 📊 評量方式

### 實作練習(50 分)

**練習 1:環境設置與首次任務(20 分)**
- 環境配置正確性(10 分)
- 首次任務完成品質(10 分)

**練習 2:EPCV 工作流程實戰(30 分)**
- 流程完整性(10 分)
- 每個階段的產出品質(15 分)
- 驗證與文檔(5 分)

**及格標準**:30 分(完成基本流程)

---

### 作業(50 分)

**任務 1:環境配置與上下文管理(30 分)**
- 環境配置(10 分)
- CLAUDE.md 設計(15 分)
- 上下文管理策略(5 分)

**任務 2:代碼庫分析與重構(40 分)**
- 分析報告完整性(15 分)
- 重構計劃合理性(15 分)
- 實施與驗證(10 分)

**任務 3:EPCV 工作流程(30 分)**
- 流程設計(10 分)
- 各階段產出(15 分)
- 品質保證(5 分)

**及格標準**:60 分(基本掌握核心技能)

---

### 總成績

- **85-100 分**:卓越
  - 完全掌握 EPCV 流程
  - 能獨立完成大型重構
  - CLAUDE.md 設計專業完整

- **70-84 分**:優秀
  - 理解 EPCV 核心概念
  - 能完成中等複雜度重構
  - CLAUDE.md 結構清晰

- **60-69 分**:良好
  - 掌握基本工作流程
  - 能完成簡單重構任務
  - CLAUDE.md 包含核心資訊

- **< 60 分**:需改進
  - 建議複習理論章節
  - 重做實作練習
  - 參考情境題庫加強練習

---

## 💡 學習建議

### 理論學習策略

**不要**:
- ❌ 死記硬背指令列表
- ❌ 跳過實作練習
- ❌ 只讀不練

**應該**:
- ✅ 理解「為什麼」用這個指令
- ✅ 在實際場景中練習
- ✅ 建立個人情境題庫
- ✅ 記錄每次的解決方案

---

### 實踐學習策略

**環境配置建議**:
```
第一次配置:按步驟仔細完成(30 分鐘)
→ 記錄遇到的問題
→ 保存配置檔案
→ 建立配置筆記
```

**EPCV 流程練習建議**:
```
第一遍:跟著範例操作(60 分鐘)
→ 理解每個步驟的目的

第二遍:獨立完成類似任務(90 分鐘)
→ 不看範例,憑記憶操作
→ 遇到問題再查閱

第三遍:挑戰複雜場景(120 分鐘)
→ 應用於真實專案
→ 優化流程細節
```

**上下文管理建議**:
```
小型專案(<5000 行):
→ 全部載入,建立基本 CLAUDE.md

中型專案(5000-20000 行):
→ 模組化載入,完整 CLAUDE.md

大型專案(>20000 行):
→ 分模組管理,多檔案記憶系統
```

---

## 🔗 相關資源

### 延伸閱讀

**Claude Code 官方資源**:
- [Claude Code 文檔](https://claude.ai/code)
- [CLI 工具指南](https://docs.anthropic.com/claude/docs/cli)
- [最佳實踐](https://docs.anthropic.com/claude/docs/best-practices)

**EPCV 流程**:
- [軟體重構最佳實踐](https://refactoring.guru/)
- [代碼審查指南](https://google.github.io/eng-practices/review/)
- [TDD 與重構](https://martinfowler.com/bliki/TestDrivenDevelopment.html)

**上下文工程**:
- [Prompt Engineering Guide](https://www.promptingguide.ai/)
- [LLM Context Management](https://arxiv.org/abs/2307.03172)

---

### 推薦工具

**代碼分析**:
- [Sourcegraph](https://sourcegraph.com/) - 代碼搜尋與導航
- [Code Maat](https://github.com/adamtornhill/code-maat) - 代碼複雜度分析
- [jq](https://stedolan.github.io/jq/) - JSON 處理工具

**文檔生成**:
- [Mermaid](https://mermaid.js.org/) - 圖表生成
- [mdBook](https://rust-lang.github.io/mdBook/) - 文檔書籍工具

---

## 💬 常見問題

### Q1:這個模組學完要多久?

**A**:
- 快速模式:3.5 小時(只讀理論+基本練習)
- 標準模式:6 小時(理論+所有練習+部分情境題)
- 深度模式:10 小時(理論+練習+完整情境題+作業)

建議採用標準模式,確保實踐能力。

---

### Q2:沒有 Claude Code Pro 可以學這個模組嗎?

**A**:
可以,但部分功能會受限:

**免費版**:
- 可完成大部分練習
- 上下文窗口較小
- 部分進階功能不可用

**Pro 版優勢**:
- 更大的上下文窗口
- 更快的回應速度
- 完整功能體驗

**建議**:
至少申請試用版,完整體驗課程內容。

---

### Q3:EPCV 流程是固定的嗎?

**A**:
不是。EPCV 是一個框架,可以根據專案規模調整:

**小型任務**(< 100 行改動):
- E+P 可以合併(快速探索規劃)
- C+V 可以合併(編碼後立即驗證)

**中型任務**(100-1000 行):
- 標準 EPCV 流程
- 每個階段有明確產出

**大型任務**(> 1000 行):
- 分階段 EPCV(每個模組獨立 EPCV)
- 階段間有里程碑檢查

關鍵:理解原則,靈活應用。

---

### Q4:如何知道上下文使用量?

**A**:
使用 `/context` 指令:

```bash
claude /context

# 輸出範例:
上下文使用情況:
├─ 程式碼檔案:85,000 tokens (42.5%)
├─ 專案記憶:10,000 tokens (5%)
├─ 對話歷史:20,000 tokens (10%)
└─ 總計:115,000 / 200,000 tokens

建議:
- 上下文使用率:57.5%(良好)
- 可繼續載入檔案
```

**管理策略**:
- < 70%:安全,可繼續載入
- 70-85%:注意,考慮壓縮
- 85-95%:警告,應該壓縮或移除檔案
- > 95%:緊急,必須立即處理

---

### Q5:CLAUDE.md 應該多長?

**A**:
**經驗法則**:

**小型專案**(< 5000 行):
- CLAUDE.md:200-400 行
- 包含核心規範即可

**中型專案**(5000-20000 行):
- CLAUDE.md:400-800 行
- 包含詳細規範和常見問題

**大型專案**(> 20000 行):
- 主 CLAUDE.md:600-1000 行(全局規範)
- 模組 CLAUDE.md:200-300 行(模組特定)

**超過 1000 行的問題**:
- 占用過多上下文空間
- 降低可讀性
- AI 可能忽略部分內容

**解決方案**:
- 提取共用規範
- 分模組管理
- 使用 /memory 系統

---

## 🎯 下一步

完成本模組後,繼續學習:

➡️ **模組 2.5:進階指令整合應用**
- /agents 深度應用
- /mcp 整合外部世界
- /output-style 控制輸出
- Claude Code 作為 AI Agent 平台

**預習建議**:
1. 複習模組 2 的核心概念
2. 確保能熟練使用 EPCV 流程
3. 建立至少 1 個完整的 CLAUDE.md
4. 完成模組 2 作業

---

## 📈 學習追蹤

使用以下檢查清單追蹤你的學習進度:

### 理論學習進度

- [ ] 完成 2.1 Claude Code 安裝與配置
- [ ] 完成 2.2 上下文管理與記憶系統
- [ ] 完成 2.3 程式碼庫分析與重構
- [ ] 完成 2.4 EPCV 工作流程深度解析

### 實作練習進度

- [ ] 完成練習 1:環境設置與首次任務(≥ 15 分)
- [ ] 完成練習 2:EPCV 工作流程實戰(≥ 20 分)

### 情境題進度

- [ ] 完成至少 3 個基礎級情境題
- [ ] 完成至少 2 個組合級情境題
- [ ] 挑戰 1 個複雜級情境題

### 能力驗證

- [ ] 能在 30 分鐘內完成環境配置
- [ ] 能為專案設計完整的 CLAUDE.md
- [ ] 能使用 EPCV 流程完成重構任務
- [ ] 準備好進入模組 2.5

---

**模組版本**:v2.0
**最後更新**:2025-01-30
**學習時長**:3.5-10 小時(依深度而定)
**難度**:⭐⭐ 基礎進階

**祝學習順利!**
