# S1.4：生成專案文檔

## 📋 情境資訊

- **難度**：⭐
- **預估時間**：30 分鐘
- **核心學習**：程式碼理解、文檔生成、Markdown 格式化
- **前置知識**：Claude Code 基本對話、檔案讀取能力

---

## 🎯 情境背景

你正在開發一個個人專案——一個簡單但實用的 REST API，用於管理個人圖書收藏。這個 API 包含圖書的增刪改查功能、分類管理、借閱記錄等功能。程式碼已經寫得差不多了，但還缺少一個專業的 README.md 文檔來介紹專案，方便其他開發者了解和使用。

**專案現況**:
- API 後端：Python Flask + SQLAlchemy
- 功能：圖書 CRUD、分類管理、搜尋過濾、借閱追蹤
- 程式碼結構清晰，但缺乏文檔
- 準備開源發布，需要專業的 README
- 希望文檔包含 API 說明、安裝指南、使用範例

**你的任務**:
1. 分析現有程式碼，理解專案功能和架構
2. 提取 API 端點和使用方法
3. 生成完整的 README.md 文檔
4. 包含安裝、配置、使用指南
5. 添加程式碼範例和 API 文檔

---

## 🎓 學習目標

完成本情境後，你將能夠：

- ✅ 讓 Claude Code 理解程式碼並提取關鍵資訊
- ✅ 生成結構完整的專案文檔
- ✅ 自動提取 API 端點和參數說明
- ✅ 創建使用範例和程式碼片段
- ✅ 格式化 Markdown 文檔，確保可讀性
- ✅ 結合程式碼分析和文檔撰寫的工作流程

---

## 📝 任務描述

### 階段 1: 專案分析與資訊提取 (10 分鐘)

#### 任務 1.1: 匯入專案並分析結構

**Linux 類比**: 像使用 `tree` 查看目錄結構，但 Claude Code 能理解程式碼語義。

假設專案路徑為 `~/projects/bookshelf-api`：

```bash
# 1. 進入專案目錄
cd ~/projects/bookshelf-api

# 2. 啟動 Claude Code
claude
```

**初步分析對話**:
```
我要為這個個人圖書管理 API 專案生成 README.md 文檔。

請先幫我分析專案結構：

/glob "**/*.py"

然後閱讀關鍵檔案：

/read app.py
/read requirements.txt
/read config.py

請告訴我：
1. 這個專案的主要功能是什麼？
2. 技術棧和依賴有哪些？
3. 程式碼架構如何組織？
```

#### 任務 1.2: API 端點分析

```
現在請幫我詳細分析 API 設計：

/grep "app.route\|@app.route\|@bp.route" --output-mode=content

請整理出：
1. 所有 API 端點清單
2. 每個端點的 HTTP 方法
3. 參數要求和回應格式
4. 功能分組（圖書管理、分類管理等）
```

#### 任務 1.3: 資料模型理解

```
請分析資料模型設計：

/read models.py

或者搜尋模型定義：

/grep "class.*db.Model\|class.*Model" --output-mode=content

請說明：
1. 主要的資料表和欄位
2. 表之間的關聯關係
3. 資料驗證規則
```

**檢查點 1**:
- [ ] 理解專案的主要功能和技術棧
- [ ] 掌握所有 API 端點和方法
- [ ] 了解資料模型和關聯關係

---

### 階段 2: 文檔結構設計 (5 分鐘)

#### 任務 2.1: 設計文檔大綱

```
基於剛才的分析，請為這個專案設計一個專業的 README.md 大綱。

參考開源專案的最佳實踐，應該包含：
- 專案介紹和特色
- 快速開始指南
- 安裝和配置說明
- API 文檔
- 使用範例
- 貢獻指南
- 授權資訊

請給我一個詳細的文檔結構。
```

#### 任務 2.2: 確定內容優先級

```
請幫我確定各個部分的內容重點：

1. 對於新用戶，最重要的是什麼資訊？
2. 對於開發者，需要什麼技術細節？
3. 哪些部分需要程式碼範例？
4. 如何讓文檔看起來專業且易用？
```

**檢查點 2**:
- [ ] 設計出完整的文檔結構
- [ ] 確定各部分內容重點

---

### 階段 3: 生成文檔內容 (12 分鐘)

#### 任務 3.1: 專案介紹部分

```
請幫我撰寫 README.md 的開頭部分：

1. 專案標題和簡短描述
2. 主要功能特色（bullet points）
3. 技術棧說明
4. 專案狀態和版本資訊

要求：
- 語調專業但友善
- 突出專案價值
- 包含適當的 emoji 和格式
```

#### 任務 3.2: 安裝和配置指南

```
請根據專案的 requirements.txt 和配置檔案，撰寫詳細的安裝指南：

/read requirements.txt
/read config.py

包含：
1. 環境需求（Python 版本等）
2. 步驟化安裝說明
3. 資料庫設置
4. 環境變數配置
5. 啟動命令

使用程式碼區塊格式，讓指令易於複製執行。
```

#### 任務 3.3: API 文檔生成

```
請為每個 API 端點生成詳細文檔：

基於之前分析的路由，請為每個端點提供：

## API 端點

### 圖書管理

#### GET /api/books
- **描述**: 取得圖書清單
- **參數**:
  - `page` (選用): 頁數，預設 1
  - `category` (選用): 分類過濾
- **回應範例**:
```json
{
  "books": [...],
  "pagination": {...}
}
```

請為所有端點生成類似格式的文檔。
```

#### 任務 3.4: 使用範例

```
請生成實用的使用範例：

1. **基本使用範例**：展示如何建立圖書、查詢圖書
2. **Python 範例**：使用 requests 庫的完整範例
3. **curl 範例**：命令列測試範例
4. **批量操作範例**：如批量匯入圖書

每個範例都要包含：
- 實際的程式碼
- 預期的回應
- 常見錯誤處理
```

**檢查點 3**:
- [ ] 完成專案介紹和特色說明
- [ ] 生成詳細的安裝配置指南
- [ ] 創建完整的 API 文檔
- [ ] 提供實用的使用範例

---

### 階段 4: 文檔整合與完善 (3 分鐘)

#### 任務 4.1: 整合完整文檔

```
請將剛才生成的所有部分整合成一個完整的 README.md：

按照以下結構整合：
1. 專案標題和徽章
2. 專案介紹
3. 功能特色
4. 快速開始
5. 安裝指南
6. 配置說明
7. API 文檔
8. 使用範例
9. 開發指南
10. 貢獻和授權

確保：
- Markdown 格式正確
- 目錄連結正常
- 程式碼高亮適當
- 表格和清單整齊
```

#### 任務 4.2: 品質檢查和優化

```
請檢查並優化生成的 README.md：

1. **可讀性**：段落是否清晰，格式是否一致
2. **完整性**：是否包含所有必要資訊
3. **準確性**：程式碼範例是否正確可執行
4. **專業性**：語調和格式是否符合開源專案標準

請提供改進建議，並生成最終版本。
```

**最終檢查點**:
- [ ] 生成完整的 README.md 文檔
- [ ] 所有範例程式碼正確可執行
- [ ] 文檔格式專業且易讀
- [ ] 包含所有必要的使用資訊

---

## ✅ 檢查點

### 基礎檢查點 (必須完成)

- [ ] **程式碼理解**: Claude Code 正確理解專案功能和架構
- [ ] **API 提取**: 成功提取所有 API 端點和參數
- [ ] **文檔生成**: 生成結構完整的 README.md
- [ ] **範例程式碼**: 包含可執行的使用範例
- [ ] **格式正確**: Markdown 格式規範，程式碼高亮正確

### 進階檢查點 (建議完成)

- [ ] **專業品質**: 文檔達到開源專案標準
- [ ] **使用者友善**: 新手能根據文檔快速上手
- [ ] **開發者導向**: 包含開發和貢獻指南
- [ ] **維護考量**: 文檔易於後續更新維護
- [ ] **視覺設計**: 適當使用徽章、表格、emoji 提升閱讀體驗

---

## 🎯 自然學到的指令

通過本情境，你應該自然學會以下指令組合：

### 程式碼分析指令

| 指令 | 用途 | 何時使用 |
|------|------|----------|
| `/glob "**/*.py"` | 找出所有 Python 檔案 | 分析專案結構時 |
| `/read app.py` | 讀取主程式檔案 | 理解專案入口點 |
| `/grep "@app.route"` | 搜尋 API 路由 | 提取 API 端點 |
| `/read requirements.txt` | 查看依賴清單 | 了解技術棧 |

### 文檔生成工作流程

| 階段 | 工具組合 | 目標 |
|------|----------|------|
| **分析階段** | `/glob` + `/read` | 理解專案結構和功能 |
| **提取階段** | `/grep` + 模式搜尋 | 提取 API 和關鍵資訊 |
| **生成階段** | 結構化對話 | 產生文檔各個部分 |
| **整合階段** | 格式化請求 | 整合完整文檔 |

### 提問技巧模式

**模式 1: 結構化提問**
```
請根據 [檔案內容] 分析：
1. [具體問題1]
2. [具體問題2]
3. [具體問題3]
```

**模式 2: 輸出格式指定**
```
請生成 [內容類型]，格式要求：
- [格式要求1]
- [格式要求2]
- 包含程式碼範例
```

**模式 3: 品質標準設定**
```
請按照 [標準] 生成 [內容]，要求：
- 專業性
- 可讀性
- 完整性
```

---

## ❓ 常見問題

### Q1: 生成的 API 文檔不夠詳細

**原因**: 程式碼註解不足或路由設計不規範

**解決方法**:
```
請詳細分析這個 API 端點：

/read app.py --lines 50-80

結合程式碼邏輯，請推斷：
1. 這個端點接受什麼參數？
2. 可能的錯誤情況有哪些？
3. 回應資料的結構如何？

即使程式碼沒有詳細註解，也請根據邏輯推斷。
```

---

### Q2: 範例程式碼可能不正確

**驗證策略**: 請 Claude 檢查程式碼邏輯

**解決方法**:
```
請檢查這個 curl 範例是否正確：

```bash
curl -X POST http://localhost:5000/api/books \
  -H "Content-Type: application/json" \
  -d '{"title": "Python 指南", "author": "張三"}'
```

根據 API 設計，這個請求是否會成功？如果不會，正確的格式應該是什麼？
```

---

### Q3: 不知道該包含哪些內容

**參考最佳實踐**: 分析優秀開源專案

**解決方法**:
```
請參考知名開源專案（如 Flask、Express.js）的 README 結構，
為我的專案建議應該包含哪些部分？

考慮因素：
- 目標使用者（開發者、使用者）
- 專案複雜度
- 維護需求
```

---

### Q4: 文檔太長，如何組織？

**模組化策略**: 分離複雜內容

**解決方法**:
```
請建議如何組織這個專案的文檔：

主 README.md 應該包含什麼？
哪些內容應該分離到其他檔案（如 CONTRIBUTING.md, API.md）？

請提供檔案組織建議和各檔案的內容大綱。
```

---

## 🚀 延伸挑戰

### 挑戰 1: 自動化文檔更新

**任務**: 建立文檔與程式碼同步機制

**目標**:
- 當 API 變更時自動更新文檔
- 從程式碼註解自動生成 API 文檔
- 整合到 CI/CD 流程

**實作提示**:
```python
# 使用 Python docstring 自動生成 API 文檔
from flask import Flask
app = Flask(__name__)

@app.route('/api/books', methods=['GET'])
def get_books():
    """
    取得圖書清單

    Args:
        page (int, optional): 頁數，預設為 1
        category (str, optional): 分類過濾

    Returns:
        json: 包含圖書清單和分頁資訊

    Example:
        GET /api/books?page=1&category=fiction
    """
    pass

# 然後用 Claude Code 提取這些 docstring
```

---

### 挑戰 2: 多語言文檔

**任務**: 生成多語言版本的專案文檔

**要求**:
- 主要語言：繁體中文、英文
- 保持格式一致性
- 考慮文化差異

**實作範例**:
```
請將這個 README.md 翻譯為英文版本：

[提供中文 README 內容]

注意：
1. 技術術語保持一致
2. 範例程式碼不需翻譯
3. 考慮英語使用者的閱讀習慣
4. 保持 Markdown 格式完整
```

---

### 挑戰 3: 互動式文檔

**任務**: 創建可執行的文檔範例

**特色**:
- 整合 Swagger/OpenAPI
- 提供線上 API 測試
- 包含互動式程式碼範例

**工具整合**:
```python
# 使用 Flask-RESTX 生成 Swagger 文檔
from flask_restx import Api, Resource, fields

api = Api(app, doc='/docs/')

book_model = api.model('Book', {
    'id': fields.Integer,
    'title': fields.String(required=True),
    'author': fields.String(required=True)
})

@api.route('/books')
class BookList(Resource):
    @api.marshal_list_with(book_model)
    def get(self):
        """取得所有圖書"""
        pass
```

---

## 📚 相關資源

### 文檔撰寫最佳實踐

| 文檔部分 | 關鍵要素 | 常見錯誤 |
|----------|----------|----------|
| **專案介紹** | 價值主張、功能特色 | 過於技術化，缺乏吸引力 |
| **安裝指南** | 步驟化、可執行 | 假設過多前置知識 |
| **API 文檔** | 參數、範例、錯誤碼 | 缺乏實際使用範例 |
| **範例程式碼** | 可執行、實用 | 過於簡化或過於複雜 |

### 課程資源

- **理論**: `2.4_文檔生成與格式化.md`
- **下一步**: `S1.5_批量檔案重命名.md`

### Markdown 撰寫技巧

```markdown
# 使用這些技巧提升文檔品質

## 程式碼區塊
```python
# 指定語言以啟用語法高亮
def example():
    pass
```

## 表格對齊
| 左對齊 | 中間對齊 | 右對齊 |
|:-------|:--------:|-------:|
| 內容   |   內容   |   內容 |

## 連結和引用
[連結文字](URL)
![圖片說明](圖片URL)

## 注意事項
> **注意**: 重要資訊使用引用格式

## 清單和核取方塊
- [x] 已完成項目
- [ ] 待完成項目
```

---

## 📝 反思問題

完成情境後，思考以下問題：

1. **自動化程度**: Claude Code 在文檔生成中扮演什麼角色？哪些部分仍需人工調整？

2. **品質控制**: 如何確保生成的文檔準確且實用？

3. **維護策略**: 當程式碼變更時，如何高效更新文檔？

4. **使用者體驗**: 從讀者角度，這份文檔是否清晰易懂？

5. **工作流程**: 你建立了什麼樣的文檔生成工作流程，可以應用到其他專案？

---

**情境版本**: v1.0
**最後更新**: 2025-01-30
**預估完成率**: 90% 學員能在 30 分鐘內生成基本專案文檔
**常見卡點**: API 文檔格式 (15%), Markdown 語法 (10%)