# 模組 2：CLI 工具精通 - 情境題庫總覽

## 📋 題庫說明

本情境題庫包含 **10 個組合級實戰情境**，涵蓋日常開發中最常遇到的工作場景。每個情境設計目的是讓你在真實問題中自然學會 CLI 指令組合與工作流程。

### 學習路徑

```
理論學習 → 組合級情境實戰 → 掌握 CLI 工具精通
   ↓              ↓                    ↓
2.1-2.4      C01-C10            生產級應用能力
理論篇      (16.5 小時)
```

---

## 🎯 組合級情境清單（10 題）

### 第一批：基礎工作流程（C01-C05）

#### C01：開源專案首次貢獻
- **難度**：⭐⭐⭐☆☆
- **時間**：1.5 小時
- **核心技能**：`/glob`, `/grep`, `/read`, `/memory`
- **場景**：首次參與開源專案，需要理解 150+ 文件的 React 專案並添加新功能
- **挑戰**：陌生代碼庫導航、專案慣例理解、遵循現有模式
- **學習重點**：
  - 系統化探索未知代碼庫
  - 模式識別與慣例發現
  - 使用 `/memory` 保存知識

**適用場景**：
- 首次接觸新專案
- 開源貢獻準備
- 快速理解大型專案結構

---

#### C02：API 版本遷移
- **難度**：⭐⭐⭐⭐☆
- **時間**：2 小時
- **核心技能**：`/grep`, `--add-dir`, `/compact`, `CLAUDE.md`
- **場景**：將後台管理系統從 API v1 遷移到 v2，跨 23 個文件的系統性重構
- **挑戰**：確保不遺漏任何 API 調用、支持漸進式遷移、保持向後兼容
- **學習重點**：
  - 大規模系統性重構
  - 上下文管理策略（`/compact`）
  - 安全遷移模式（Feature Flag）

**適用場景**：
- 大規模 API 遷移
- 依賴項升級
- 系統性重構

---

#### C03：緊急 Bug 修復
- **難度**：⭐⭐⭐⭐☆
- **時間**：1 小時
- **核心技能**：`/grep`, `/read`, `/compact`，快速迭代
- **場景**：生產環境 P0 事故，競態條件導致數據損壞，需在 1 小時內修復
- **挑戰**：陌生代碼庫、時間壓力、需確保修復不引入新問題
- **學習重點**：
  - 緊急 Bug 修復工作流
  - 快速模式識別
  - 最小可行修復策略
  - JavaScript 非同步陷阱

**適用場景**：
- 生產環境緊急修復
- 時間壓力下決策
- 陌生代碼快速理解

---

#### C04：功能模組提取
- **難度**：⭐⭐⭐⭐☆
- **時間**：2 小時
- **核心技能**：`/glob`, `/grep`, `/read`, `CLAUDE.md`
- **場景**：從單體應用（23 個文件）中提取支付模組為獨立微服務
- **挑戰**：識別所有依賴（包括隱藏依賴）、支持漸進式切換、避免破壞性變更
- **學習重點**：
  - 模組邊界識別
  - 依賴分析（顯式、數據層、隱藏）
  - Strangler Fig 模式實作
  - API Client 抽象

**適用場景**：
- 單體拆分為微服務
- 模組化重構
- 架構演進

---

#### C05：安全漏洞修復
- **難度**：⭐⭐⭐⭐☆
- **時間**：1.5 小時
- **核心技能**：`/grep` 模式匹配、`/memory` 安全清單
- **場景**：安全審計發現 11 個漏洞（3 Critical, 5 High），需在 48 小時內修復
- **挑戰**：找到所有漏洞實例、按嚴重程度優先處理、確保修復不引入新問題
- **學習重點**：
  - 安全漏洞搜尋模式
  - 風險導向優先級排序
  - 常見漏洞的標準修復模式
  - 建立預防機制（SECURITY.md, pre-commit hooks）

**適用場景**：
- 安全審計後修復
- 漏洞掃描結果處理
- 安全最佳實踐建立

---

### 第二批：品質與性能提升（C06-C10）

#### C06：測試覆蓋率提升
- **難度**：⭐⭐⭐☆☆
- **時間**：2 小時
- **核心技能**：`/read`（深度分析）、`/glob`、`/memory`（測試模式）
- **場景**：為 0% 測試覆蓋率的庫存管理模組添加完整測試
- **挑戰**：理解未文檔化的複雜業務邏輯，設計全面的測試案例
- **學習重點**：
  - 快速理解 legacy 代碼
  - 測試場景設計（Happy Path, Edge Cases, Errors）
  - 測試組織結構
  - 達到 90%+ 覆蓋率

**適用場景**：
- Legacy 代碼補測試
- 提升代碼品質
- 重構前準備

---

#### C07：代碼風格統一
- **難度**：⭐⭐⭐☆☆
- **時間**：1.5 小時
- **核心技能**：`/grep`（模式違規）、批量重構、`/memory`（風格指南）
- **場景**：統一 10+ 開發者的不一致代碼風格
- **挑戰**：批量查找違規、安全重構、建立團隊標準
- **學習重點**：
  - 使用 `/grep` 識別模式
  - 系統化重構規劃
  - 自動化工具（black, isort, flake8）
  - Pre-commit hooks 設置

**適用場景**：
- 團隊代碼標準化
- Code Review 效率提升
- 新人 Onboarding

---

#### C08：依賴項升級
- **難度**：⭐⭐⭐⭐☆
- **時間**：2 小時
- **核心技能**：`/grep`（廢棄 API）、系統化遷移、`CLAUDE.md`（追蹤變更）
- **場景**：Django 2.2 → 4.2 升級，處理多個破壞性變更
- **挑戰**：找到所有廢棄 API 使用、處理多個破壞性變更
- **學習重點**：
  - 全面的破壞性變更掃描
  - 階段化遷移規劃
  - 數據庫遷移安全性
  - 藍綠部署

**適用場景**：
- 框架版本升級
- 依賴項更新
- 破壞性變更處理

---

#### C09：性能瓶頸優化
- **難度**：⭐⭐⭐⭐☆
- **時間**：1.5 小時
- **核心技能**：`/grep`（N+1 查詢）、查詢優化、性能測試
- **場景**：API 響應時間從 200ms 增加到 3-8s，找出並修復瓶頸
- **挑戰**：大型代碼庫、需快速定位根本原因
- **學習重點**：
  - N+1 查詢識別
  - Django ORM 優化（select_related, prefetch_related, annotate）
  - 數據庫索引
  - 緩存策略（Redis）
  - 54x-1200x 性能提升

**適用場景**：
- 性能問題診斷
- 數據庫查詢優化
- API 響應時間改善

---

#### C10：錯誤處理增強
- **難度**：⭐⭐⭐☆☆
- **時間**：1.5 小時
- **核心技能**：`/grep`（bare except）、異常設計、結構化日誌
- **場景**：支付系統錯誤處理不當導致數據不一致，系統化改善
- **挑戰**：多處錯誤處理位置、需要一致的策略
- **學習重點**：
  - 異常類別層次設計
  - Bare except 消除
  - 交易控制（@transaction.atomic）
  - 結構化日誌（context, stack traces）
  - 錯誤監控（Sentry）

**適用場景**：
- 錯誤處理改善
- 系統穩定性提升
- 可觀測性建立

---

## 📊 技能矩陣

### CLI 指令使用頻率

| 指令 | 主要場景 | 使用頻率 |
|------|---------|---------|
| `/grep` | C02, C03, C05, C07, C08, C09, C10 | ⭐⭐⭐⭐⭐ |
| `/read` | C01, C03, C04, C06 | ⭐⭐⭐⭐☆ |
| `/glob` | C01, C04, C06 | ⭐⭐⭐☆☆ |
| `/memory` | C01, C05, C06, C07 | ⭐⭐⭐☆☆ |
| `--add-dir` | C02, C04 | ⭐⭐⭐☆☆ |
| `/compact` | C02, C03 | ⭐⭐☆☆☆ |
| `CLAUDE.md` | C02, C04, C07, C08 | ⭐⭐⭐☆☆ |

### 場景類型分布

| 類型 | 情境 | 數量 |
|------|------|------|
| 代碼探索 | C01, C04 | 2 |
| 系統性重構 | C02, C07, C08 | 3 |
| 問題修復 | C03, C05, C09, C10 | 4 |
| 品質提升 | C06 | 1 |

---

## 🎯 學習路線建議

### 新手路線（推薦）

```
階段一：探索與理解（3.5 小時）
C01（開源貢獻）→ C06（測試補充）
目標：學會代碼庫探索與理解

階段二：重構與遷移（5.5 小時）
C02（API遷移）→ C07（風格統一）→ C08（依賴升級）
目標：掌握大規模重構技巧

階段三：問題診斷（5.5 小時）
C03（緊急修復）→ C05（安全修復）→ C09（性能優化）→ C10（錯誤處理）
目標：建立問題診斷與修復能力

階段四：架構演進（2 小時）
C04（模組提取）
目標：理解架構演進方法
```

### 進階路線（按需學習）

**需要快速上手新專案**：
- C01（開源貢獻）

**面對大規模重構**：
- C02（API遷移）→ C07（風格統一）→ C08（依賴升級）

**處理緊急問題**：
- C03（緊急修復）→ C05（安全修復）

**提升代碼品質**：
- C06（測試覆蓋）→ C10（錯誤處理）

**性能優化需求**：
- C09（性能瓶頸）

**架構重構**：
- C04（模組提取）

---

## 📈 難度分布

```
⭐⭐⭐☆☆（組合級）：C01, C06, C07, C10
⭐⭐⭐⭐☆（進階組合級）：C02, C03, C04, C05, C08, C09

建議順序：
1. 從 ⭐⭐⭐☆☆ 開始（C01, C06, C07, C10）
2. 進入 ⭐⭐⭐⭐☆（其餘 6 個情境）
```

---

## ⏱️ 總時長規劃

| 情境組 | 情境數 | 總時長 |
|--------|--------|--------|
| 第一批（C01-C05）| 5 | 8 小時 |
| 第二批（C06-C10）| 5 | 8.5 小時 |
| **總計** | **10** | **16.5 小時** |

建議分配：
- **1 週密集訓練**：每天 2-3 個情境
- **2 週常規學習**：每天 1-2 個情境
- **按需學習**：根據實際工作需求選擇相關情境

---

## ✅ 完成檢核清單

每完成一個情境後，確認：

### 技術層面
- [ ] 理解了該情境的核心問題
- [ ] 掌握了相關 CLI 指令組合
- [ ] 能夠獨立重現解決流程
- [ ] 使用 `/memory` 保存了可復用知識

### 能力層面
- [ ] 知道何時使用該工作流程
- [ ] 能夠適應類似場景
- [ ] 理解了背後的原理
- [ ] 可以向他人解釋

### 實踐層面
- [ ] 在實際專案中嘗試應用
- [ ] 根據實際情況調整流程
- [ ] 建立了個人化的 CLAUDE.md
- [ ] 分享給團隊成員

---

## 🔗 相關資源

### 理論基礎
- **2.1_Claude_Code安裝與配置.md** - CLI 工具基礎
- **2.2_上下文管理與記憶系統.md** - 上下文與記憶機制
- **2.3_程式碼庫分析與重構.md** - 代碼分析技巧
- **2.4_EPCV工作流程深度解析.md** - 系統化開發流程

### 進階學習
- **模組 2.5** - 進階指令整合應用
- **模組 3** - IDE 整合（混合工具鏈）
- **模組 4** - TDD/BDD 實作
- **模組 5** - CI/CD 自動化

### 實戰專案
- **補充資源/範例專案庫** - 完整專案範例
- **11_實戰綜合項目** - 綜合應用情境

---

## 💡 使用建議

### 最大化學習效果

1. **情境前準備**：
   - 複習相關理論章節
   - 確保環境設置正確
   - 預留完整時間不被打斷

2. **情境中實踐**：
   - 先嘗試自己解決，再看參考解答
   - 記錄遇到的問題與解決方法
   - 使用 `/memory` 保存關鍵知識點

3. **情境後鞏固**：
   - 完成反思問題
   - 嘗試延伸練習
   - 在真實專案中應用

4. **長期記憶**：
   - 定期複習 `/memory` 內容
   - 建立個人化的 CLAUDE.md
   - 製作 Anki 記憶卡（可選）

---

## 📞 獲取幫助

遇到困難時：
1. 檢查情境中的「檢查點」，確認是否遺漏步驟
2. 複習相關理論章節
3. 查看「常見問題」部分
4. 嘗試「延伸練習」中的簡化版本
5. 與同儕討論交流

---

**版本**：v1.0
**最後更新**：2025-10-30
**情境總數**：10 個組合級情境
**總學習時長**：16.5 小時
