# C04: 多資料庫同步系統 - 資料一致性保證

## 📋 情境描述

公司有多個資料庫（PostgreSQL、MySQL、MongoDB），需要定期同步關鍵資料。

### 你想要的
> "自動同步多個資料庫，確保資料一致性，提供錯誤回滾機制"

---

## 🎯 學習目標

- [ ] 多個 Database MCP 協同
- [ ] 資料同步與一致性控制
- [ ] 事務處理與回滾
- [ ] 資料驗證機制

**時間**：2 小時

---

## 系統架構

```
階段 1：並行查詢（從多個資料庫）
├─ PostgreSQL MCP → 用戶資料
├─ MySQL MCP → 訂單資料
└─ MongoDB MCP → 日誌資料

階段 2：資料驗證
├─ 檢查資料完整性
├─ 識別衝突
└─ 決定解決策略

階段 3：串行寫入（確保一致性）
├─ 寫入主資料庫
├─ 驗證寫入成功
├─ 寫入備份資料庫
└─ If 失敗 → 回滾

階段 4：資料驗證
└─ 確認所有資料庫狀態一致
```

---

## 學習重點

### 資料同步策略
- 單向同步 vs 雙向同步
- 衝突解決策略（Last-Write-Wins / Manual Resolution）
- 增量同步 vs 全量同步

### 一致性保證
- Two-Phase Commit
- Saga Pattern
- 最終一致性

### 錯誤處理
- 回滾機制
- 補償事務
- 錯誤日誌與追蹤

**完整實作內容將在後續擴充**

---

## 📚 相關資源

- Database MCP 進階用法
- 分散式事務處理
- 資料同步best practices
