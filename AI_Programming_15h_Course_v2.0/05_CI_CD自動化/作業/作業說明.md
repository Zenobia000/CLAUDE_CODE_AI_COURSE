# 模組 5 作業：CI/CD 自動化整合實戰

## 📋 作業概述

本作業旨在檢驗你對 CI/CD 自動化管線的理解和實際應用能力,重點在於：
- 完整 CI/CD 管線建立
- 多層次安全掃描整合
- 自動化部署策略實施
- AI 輔助工作流程優化

**總分**：100 分
**預計時間**：3-4 小時
**截止日期**：課程第 5 週結束
**提交方式**：GitHub Repository（含完整 workflow 配置）

---

## 🎯 作業目標

完成本作業後，你將能夠：
- ✅ 建立企業級的 CI/CD 管線
- ✅ 整合多種安全掃描工具
- ✅ 實施自動化測試與部署
- ✅ 使用 AI 優化 workflow 配置
- ✅ 處理 CI/CD 故障並進行除錯

---

## 📝 作業內容

### 任務 1：建立基礎 CI 管線（30 分）

#### 情境背景

你剛加入一家 FinTech 新創公司，負責為他們的核心支付服務建立第一條 CI 管線。

**專案資訊**：
- **技術棧**：FastAPI + Python 3.11 + PostgreSQL
- **團隊規模**：5 個後端工程師
- **目前狀況**：
  - 沒有任何自動化測試
  - 每次部署都手動測試（耗時 2 小時）
  - 上個月發生 3 次生產環境故障
  - 測試覆蓋率：0%

**CISO 的要求**：
> 「每一行程式碼都必須經過自動化測試和安全掃描才能合併到 main 分支。我們不能再容忍任何未經測試的程式碼進入生產環境。」

**你的任務**：建立基礎 CI 管線，涵蓋自動化測試、程式碼品質檢查、測試報告生成。

---

#### 任務要求

**第 1 步：專案準備（5 分）**

建立一個 FastAPI 專案，包含以下結構：

```
payment-service/
├── app/
│   ├── __init__.py
│   ├── main.py              # FastAPI 應用入口
│   ├── models.py            # 資料模型
│   ├── schemas.py           # Pydantic schemas
│   ├── database.py          # 資料庫連接
│   └── routers/
│       ├── __init__.py
│       ├── payments.py      # 支付相關 API
│       └── users.py         # 使用者相關 API
│
├── tests/
│   ├── __init__.py
│   ├── test_payments.py     # 支付功能測試
│   ├── test_users.py        # 使用者功能測試
│   └── conftest.py          # pytest 配置
│
├── .github/
│   └── workflows/
│       └── ci.yml           # CI workflow
│
├── requirements.txt
├── requirements-dev.txt
├── pytest.ini
├── .coveragerc
└── README.md
```

**核心功能需求**：
- 至少 3 個 API 端點（創建支付、查詢支付、查詢用戶）
- 包含資料驗證（Pydantic）
- 包含錯誤處理
- 至少 10 個測試案例（單元測試 + 整合測試）

**評分標準**：
- 專案結構完整：2 分
- API 功能正確：2 分
- 測試案例完整：1 分

---

**第 2 步：配置 CI Workflow（15 分）**

建立 `.github/workflows/ci.yml`，實現以下功能：

**必須包含的步驟**：

1. **環境準備**
   - Python 3.11 安裝
   - 依賴安裝（requirements.txt + requirements-dev.txt）
   - PostgreSQL 服務啟動（使用 Docker）

2. **程式碼品質檢查**
   - Linting（使用 ruff 或 flake8）
   - 格式檢查（使用 black）
   - Type checking（使用 mypy）
   - Import 排序（使用 isort）

3. **自動化測試**
   - 單元測試（pytest）
   - 整合測試（含資料庫）
   - 測試覆蓋率計算（pytest-cov）
   - 覆蓋率要求：≥ 80%

4. **測試報告生成**
   - HTML 測試報告
   - Coverage badge
   - 測試結果摘要（使用 GitHub Actions summary）

**Workflow 觸發條件**：
- Push 到任何分支
- Pull Request 到 main 分支
- 手動觸發（workflow_dispatch）

**效能要求**：
- 總執行時間 < 5 分鐘
- 使用 cache 加速依賴安裝

**範例 Workflow 骨架**：

```yaml
name: CI Pipeline

on:
  push:
    branches: ['**']
  pull_request:
    branches: [main]
  workflow_dispatch:

jobs:
  test:
    runs-on: ubuntu-latest

    services:
      postgres:
        # 配置 PostgreSQL

    steps:
      - name: Checkout code
        # ...

      - name: Setup Python
        # ...

      - name: Cache dependencies
        # ...

      - name: Install dependencies
        # ...

      - name: Lint with ruff
        # ...

      - name: Format check with black
        # ...

      - name: Type check with mypy
        # ...

      - name: Run tests
        # ...

      - name: Generate coverage report
        # ...

      - name: Upload coverage
        # ...
```

**評分標準**：
- Workflow 配置正確：6 分
- 所有檢查都能執行成功：4 分
- 測試覆蓋率 ≥ 80%：3 分
- 使用 cache 優化效能：2 分

---

**第 3 步：測試與驗證（10 分）**

**必須通過的驗證**：

1. **功能驗證**
   - [ ] Push 程式碼後 CI 自動觸發
   - [ ] 所有檢查都通過（綠色 ✅）
   - [ ] 測試覆蓋率達到 80% 以上
   - [ ] 總執行時間 < 5 分鐘

2. **故障模擬**
   - [ ] 引入一個 linting 錯誤 → CI 應該失敗
   - [ ] 引入一個測試失敗 → CI 應該失敗
   - [ ] 降低測試覆蓋率 < 80% → CI 應該失敗

3. **文檔撰寫**
   - 在 README.md 中添加：
     - CI badge（顯示 workflow 狀態）
     - Coverage badge（顯示測試覆蓋率）
     - 如何在本地執行測試
     - 如何解讀 CI 結果

**評分標準**：
- 所有功能驗證通過：5 分
- 故障模擬正確：3 分
- 文檔清晰完整：2 分

---

### 任務 2：整合安全掃描（40 分）

#### 情境背景

你的 CI 管線運行了一個月，但上週發生了嚴重的安全事件：

**安全事件報告**：
```
日期：2024-10-28
嚴重程度：Critical
影響：3,000 用戶個資外洩

根本原因分析：
1. 開發者在程式碼中硬編碼了資料庫密碼
2. 使用了有已知 CVE 漏洞的 cryptography 套件（CVE-2023-50782）
3. SQL 注入漏洞（未使用參數化查詢）
4. API 端點缺乏身份驗證

損失：
- 罰金：$500,000
- 聲譽損失：無法估量
- 客戶流失：15%
```

**CTO 的指示**：
> 「這是不可接受的。我要求在 CI 管線中整合多層次的安全掃描。任何有高危漏洞的程式碼都不能進入 main 分支。這不是選項，這是必須。」

**你的任務**：在現有 CI 管線中整合三層安全掃描。

---

#### 任務要求

**第 1 步：靜態應用安全測試（SAST）（15 分）**

整合 **CodeQL** 進行深度靜態分析。

**必須檢測的漏洞類型**：
- SQL 注入（CWE-89）
- 硬編碼密鑰（CWE-798）
- 路徑遍歷（CWE-22）
- 命令注入（CWE-78）
- 不安全的隨機數生成（CWE-330）
- 弱雜湊算法（CWE-327）

**實作步驟**：

1. **建立 CodeQL Workflow**（`.github/workflows/codeql.yml`）
   ```yaml
   name: CodeQL Security Scan

   on:
     push:
       branches: [main]
     pull_request:
       branches: [main]
     schedule:
       - cron: '0 0 * * 1'  # 每週一執行

   jobs:
     analyze:
       # 配置 CodeQL 掃描
   ```

2. **自訂 CodeQL 查詢**（`.github/codeql/custom-queries.yml`）
   - 添加針對 FastAPI 的安全規則
   - 檢測缺乏身份驗證的 API 端點
   - 檢測敏感資料記錄

3. **設定掃描策略**
   - 掃描所有 Python 程式碼
   - 生成 SARIF 報告
   - 上傳到 GitHub Security tab
   - Critical/High 漏洞導致 PR 阻擋

**故意引入的漏洞範例**（用於測試）：

```python
# app/routers/payments.py
import hashlib
import random

@router.post("/payment")
async def create_payment(card_number: str, amount: float):
    # ❌ SQL 注入漏洞
    query = f"INSERT INTO payments (card, amount) VALUES ('{card_number}', {amount})"

    # ❌ 硬編碼密鑰
    encryption_key = "my-secret-key-12345"

    # ❌ 弱雜湊算法
    card_hash = hashlib.md5(card_number.encode()).hexdigest()

    # ❌ 不安全的隨機數
    transaction_id = random.randint(1000, 9999)

    return {"transaction_id": transaction_id}
```

**驗證要求**：
- [ ] CodeQL 掃描能偵測到所有 4 個漏洞
- [ ] 掃描結果出現在 Security tab
- [ ] 提供修復建議

**評分標準**：
- CodeQL 正確配置：6 分
- 偵測到所有測試漏洞：6 分
- 自訂查詢規則：3 分

---

**第 2 步：依賴漏洞掃描（SCA）（15 分）**

整合 **Snyk** 和 **Safety** 進行依賴掃描。

**必須掃描的內容**：
- Python 套件依賴（requirements.txt）
- 已知 CVE 漏洞
- 過時的套件版本
- License 合規性

**實作步驟**：

1. **建立 Dependency Scan Workflow**（`.github/workflows/dependency-scan.yml`）
   ```yaml
   name: Dependency Security Scan

   on:
     push:
       branches: [main]
     pull_request:
       branches: [main]
     schedule:
       - cron: '0 0 * * *'  # 每天執行

   jobs:
     snyk:
       # Snyk 掃描

     safety:
       # Safety 掃描
   ```

2. **配置 Snyk**
   - 使用 Snyk GitHub Action
   - 設定嚴重度閾值（High/Critical 阻擋）
   - 生成修復 PR（Snyk Fix PR）

3. **配置 Safety**
   - 使用 Safety CLI
   - 檢查 requirements.txt 和 requirements-dev.txt
   - 生成漏洞報告

4. **建立依賴策略文檔**（`docs/dependency-policy.md`）
   ```markdown
   # 依賴安全策略

   ## 套件審核標準
   - 必須是活躍維護的專案（6 個月內有更新）
   - 無已知 Critical/High CVE
   - 使用許可的 License（MIT, Apache 2.0, BSD）

   ## 更新策略
   - Critical 漏洞：24 小時內修復
   - High 漏洞：7 天內修復
   - Medium 漏洞：30 天內修復

   ## 審核流程
   1. 新增依賴需要 Tech Lead 批准
   2. 每週自動掃描
   3. 發現漏洞自動建立 Issue
   ```

**測試用有漏洞的依賴**：

```
# requirements.txt
fastapi==0.68.0      # 已知有漏洞的舊版本
pydantic==1.8.0      # 已知有漏洞的舊版本
cryptography==3.3.0  # CVE-2023-50782
requests==2.25.0     # 已知有漏洞的舊版本
```

**驗證要求**：
- [ ] Snyk 掃描能偵測到所有漏洞
- [ ] Safety 掃描能偵測到所有漏洞
- [ ] 生成清晰的漏洞報告
- [ ] 提供升級建議

**評分標準**：
- Snyk 正確配置：5 分
- Safety 正確配置：4 分
- 偵測到所有測試漏洞：4 分
- 依賴策略文檔：2 分

---

**第 3 步：容器安全掃描（10 分）**

整合 **Trivy** 進行容器映像掃描。

**必須掃描的內容**：
- 基礎映像漏洞
- 系統套件漏洞
- 應用程式依賴漏洞
- 敏感資訊洩露（Secrets）

**實作步驟**：

1. **建立 Dockerfile**（`Dockerfile`）
   ```dockerfile
   FROM python:3.11-slim

   WORKDIR /app

   COPY requirements.txt .
   RUN pip install --no-cache-dir -r requirements.txt

   COPY app/ ./app/

   EXPOSE 8000

   CMD ["uvicorn", "app.main:app", "--host", "0.0.0.0", "--port", "8000"]
   ```

2. **建立 Container Scan Workflow**（`.github/workflows/container-scan.yml`）
   ```yaml
   name: Container Security Scan

   on:
     push:
       branches: [main]
     pull_request:
       branches: [main]

   jobs:
     trivy:
       runs-on: ubuntu-latest
       steps:
         - name: Build image
           # 構建 Docker 映像

         - name: Run Trivy scan
           # 執行 Trivy 掃描

         - name: Upload results
           # 上傳掃描結果
   ```

3. **多階段構建優化**
   - 使用 multi-stage build 減小映像大小
   - 移除不必要的套件
   - 使用 distroless 或 alpine 基礎映像

4. **安全最佳實踐**
   - 非 root 使用者運行
   - 最小化 Layer 數量
   - 不在映像中包含 secrets

**驗證要求**：
- [ ] Trivy 掃描能正常執行
- [ ] 偵測基礎映像漏洞
- [ ] 映像大小 < 200MB
- [ ] 無 Critical 漏洞

**評分標準**：
- Trivy 正確配置：4 分
- Dockerfile 安全最佳實踐：3 分
- 映像優化（大小 < 200MB）：2 分
- 無 Critical 漏洞：1 分

---

### 任務 3：完整 CI/CD 管線設計（30 分）

#### 情境背景

經過兩個月的努力，你的團隊已經有了完整的 CI 管線和安全掃描。現在 CTO 希望實現「從程式碼提交到生產部署」的全自動化流程。

**業務需求**：
- 3 個環境：Development、Staging、Production
- Development：每次 push 自動部署
- Staging：main 分支自動部署
- Production：手動觸發，需要審核

**技術約束**：
- 使用 Railway 或 Fly.io（免費層）進行部署
- 必須支援回退機制
- 部署時間 < 10 分鐘
- 零停機部署

**合規要求**：
- 每次部署必須有審計日誌
- Production 部署需要至少 1 人審核
- 部署失敗自動回退
- 所有環境變數使用 Secrets 管理

---

#### 任務要求

**第 1 步：多環境部署配置（15 分）**

**環境配置矩陣**：

| 環境 | 觸發條件 | 審核 | 資料庫 | 監控 | 回退 |
|-----|---------|-----|-------|------|-----|
| Development | Push to feature/* | 否 | SQLite | 基礎日誌 | 否 |
| Staging | Push to main | 否 | PostgreSQL | 完整監控 | 是 |
| Production | 手動觸發 + Tag | 是 | PostgreSQL | 完整監控 | 是 |

**實作步驟**：

1. **建立部署 Workflow**（`.github/workflows/deploy.yml`）
   ```yaml
   name: Deploy Pipeline

   on:
     push:
       branches:
         - main
         - 'feature/**'
     workflow_dispatch:
       inputs:
         environment:
           description: 'Deployment environment'
           required: true
           type: choice
           options:
             - development
             - staging
             - production

   jobs:
     deploy-dev:
       if: startsWith(github.ref, 'refs/heads/feature/')
       # 部署到 Development

     deploy-staging:
       if: github.ref == 'refs/heads/main'
       # 部署到 Staging

     deploy-production:
       if: github.event_name == 'workflow_dispatch' && github.event.inputs.environment == 'production'
       environment: production
       # 部署到 Production
   ```

2. **配置環境 Secrets**
   - DATABASE_URL_DEV
   - DATABASE_URL_STAGING
   - DATABASE_URL_PROD
   - RAILWAY_TOKEN / FLY_API_TOKEN

3. **建立健康檢查端點**
   ```python
   # app/main.py
   @app.get("/health")
   async def health_check():
       return {
           "status": "healthy",
           "version": os.getenv("APP_VERSION", "unknown"),
           "environment": os.getenv("ENVIRONMENT", "unknown"),
           "timestamp": datetime.utcnow().isoformat()
       }
   ```

4. **部署驗證**
   - 部署後自動執行健康檢查
   - 執行 smoke tests
   - 驗證關鍵 API 端點

**評分標準**：
- 多環境配置正確：6 分
- Secrets 管理正確：3 分
- 健康檢查實現：3 分
- 部署驗證完整：3 分

---

**第 2 步：回退策略與災難恢復（10 分）**

**必須實現的回退機制**：

1. **自動回退觸發條件**
   - 健康檢查失敗
   - Smoke tests 失敗
   - 部署超時（> 10 分鐘）
   - 錯誤率飆升（> 5%）

2. **回退實作**
   ```yaml
   # .github/workflows/deploy.yml
   jobs:
     deploy-production:
       steps:
         - name: Deploy new version
           id: deploy
           # ...

         - name: Health check
           id: health
           # ...

         - name: Rollback on failure
           if: failure()
           run: |
             echo "Deployment failed. Rolling back..."
             # 回退到上一個版本

         - name: Notify team
           if: failure()
           # 通知團隊部署失敗
   ```

3. **版本管理策略**
   - 每次部署標記版本號（Semantic Versioning）
   - 保留最近 5 個版本的映像
   - 記錄每個版本的 changelog

4. **災難恢復文檔**（`docs/disaster-recovery.md`）
   ```markdown
   # 災難恢復計劃

   ## 回退步驟
   1. 觸發回退 workflow
   2. 驗證回退成功
   3. 通知相關人員
   4. 進行根本原因分析

   ## 緊急聯絡人
   - On-call Engineer: ...
   - CTO: ...
   - CISO: ...

   ## 恢復時間目標（RTO）
   - Critical: 5 分鐘
   - High: 15 分鐘
   - Medium: 1 小時
   ```

**評分標準**：
- 自動回退機制：4 分
- 版本管理策略：3 分
- 災難恢復文檔：3 分

---

**第 3 步：監控與告警整合（5 分）**

**必須實現的監控**：

1. **部署通知**（Slack/Discord）
   ```yaml
   - name: Notify deployment start
     uses: 8398a7/action-slack@v3
     with:
       status: custom
       custom_payload: |
         {
           text: "🚀 Deployment started to ${{ github.event.inputs.environment }}",
           fields: [
             { title: "Version", value: "${{ github.sha }}", short: true },
             { title: "Branch", value: "${{ github.ref }}", short: true }
           ]
         }
   ```

2. **部署儀表板**
   - 顯示各環境的版本號
   - 顯示最近 10 次部署狀態
   - 顯示平均部署時間

3. **告警規則**
   - 部署失敗 → 立即通知
   - 回退觸發 → 立即通知
   - 部署超時 → 通知

**評分標準**：
- 部署通知實現：2 分
- 監控整合：2 分
- 告警規則：1 分

---

## 📊 評分標準總覽

| 任務 | 項目 | 配分 | 評分標準 |
|-----|------|------|---------|
| **任務 1** | 專案準備 | 5 分 | 專案結構完整、功能正確、測試完整 |
| | CI Workflow | 15 分 | 配置正確、檢查通過、覆蓋率達標、效能優化 |
| | 測試驗證 | 10 分 | 功能驗證、故障模擬、文檔完整 |
| **任務 2** | SAST 掃描 | 15 分 | CodeQL 配置、漏洞偵測、自訂規則 |
| | 依賴掃描 | 15 分 | Snyk/Safety 配置、漏洞偵測、策略文檔 |
| | 容器掃描 | 10 分 | Trivy 配置、安全實踐、映像優化 |
| **任務 3** | 多環境部署 | 15 分 | 環境配置、Secrets 管理、健康檢查、驗證 |
| | 回退策略 | 10 分 | 自動回退、版本管理、災難恢復文檔 |
| | 監控告警 | 5 分 | 通知實現、監控整合、告警規則 |
| **總計** | | **100 分** | |

---

## 📦 提交要求

### 必須包含的檔案

```
your-repo/
├── app/                          # FastAPI 應用程式碼
├── tests/                        # 測試程式碼
├── .github/
│   ├── workflows/
│   │   ├── ci.yml               # CI 管線
│   │   ├── codeql.yml           # CodeQL 掃描
│   │   ├── dependency-scan.yml  # 依賴掃描
│   │   ├── container-scan.yml   # 容器掃描
│   │   └── deploy.yml           # 部署管線
│   └── codeql/
│       └── custom-queries.yml   # 自訂查詢
├── docs/
│   ├── dependency-policy.md     # 依賴策略
│   ├── disaster-recovery.md     # 災難恢復計劃
│   └── deployment-guide.md      # 部署指南
├── Dockerfile                    # 容器化配置
├── requirements.txt
├── requirements-dev.txt
├── pytest.ini
├── .coveragerc
└── README.md                     # 必須包含所有 badges
```

### README.md 必須包含

```markdown
# Payment Service

[![CI](https://github.com/username/repo/actions/workflows/ci.yml/badge.svg)](...)
[![CodeQL](https://github.com/username/repo/actions/workflows/codeql.yml/badge.svg)](...)
[![Coverage](https://img.shields.io/codecov/c/github/username/repo)](...)

## 專案簡介
...

## CI/CD 管線

### CI 管線
- ✅ 自動化測試（pytest）
- ✅ 程式碼品質檢查（ruff, black, mypy）
- ✅ 測試覆蓋率檢查（≥ 80%）
- ✅ 靜態安全分析（CodeQL）
- ✅ 依賴漏洞掃描（Snyk, Safety）
- ✅ 容器安全掃描（Trivy）

### CD 管線
- ✅ 多環境部署（Dev/Staging/Prod）
- ✅ 自動化健康檢查
- ✅ 回退機制
- ✅ 部署通知（Slack）

## 如何在本地執行測試
...

## 如何解讀 CI 結果
...

## 安全政策
詳見 [docs/dependency-policy.md](docs/dependency-policy.md)
```

---

## 🎯 額外加分項（最多 +10 分）

### 進階功能（任選）

1. **效能測試整合**（+3 分）
   - 整合 Locust 或 k6 進行負載測試
   - 設定效能基準（P95 < 200ms）
   - 效能回歸檢測

2. **E2E 測試**（+3 分）
   - 使用 Playwright 或 Selenium
   - 測試關鍵用戶流程
   - 截圖/影片錄製

3. **Chaos Engineering**（+2 分）
   - 模擬資料庫故障
   - 模擬網路延遲
   - 驗證系統韌性

4. **成本優化**（+2 分）
   - CI 執行時間 < 3 分鐘
   - 使用 GitHub Actions cache
   - 並行執行優化

---

## ✅ 檢查清單

提交前確認：

### 任務 1（30 分）
- [ ] FastAPI 專案建立完成
- [ ] 至少 3 個 API 端點
- [ ] 至少 10 個測試案例
- [ ] CI workflow 正確配置
- [ ] 所有檢查都通過
- [ ] 測試覆蓋率 ≥ 80%
- [ ] 執行時間 < 5 分鐘
- [ ] README 有 CI badge 和 coverage badge

### 任務 2（40 分）
- [ ] CodeQL 掃描配置完成
- [ ] 能偵測測試漏洞（SQL 注入、硬編碼密鑰等）
- [ ] Snyk 掃描配置完成
- [ ] Safety 掃描配置完成
- [ ] 能偵測有漏洞的依賴
- [ ] Trivy 掃描配置完成
- [ ] Dockerfile 遵循安全最佳實踐
- [ ] 映像大小 < 200MB
- [ ] 無 Critical 漏洞
- [ ] 依賴策略文檔完成

### 任務 3（30 分）
- [ ] 多環境部署配置完成
- [ ] Development 自動部署
- [ ] Staging 自動部署
- [ ] Production 手動部署 + 審核
- [ ] 健康檢查端點實現
- [ ] 部署驗證完成
- [ ] 自動回退機制實現
- [ ] 版本管理策略實施
- [ ] 災難恢復文檔完成
- [ ] 部署通知整合
- [ ] 監控告警配置

### 文檔（貫穿所有任務）
- [ ] README.md 完整且清晰
- [ ] 所有 badges 正常顯示
- [ ] 依賴策略文檔完成
- [ ] 災難恢復計劃完成
- [ ] 部署指南完成
- [ ] 程式碼有適當註解

---

## 🚀 提交方式

1. **建立 GitHub Repository**
   - Public 或 Private（需授權訪問）
   - 命名建議：`payment-service-cicd`

2. **推送所有程式碼**
   ```bash
   git add .
   git commit -m "feat: complete CI/CD homework"
   git push origin main
   ```

3. **確認所有 Workflow 運行**
   - 檢查 Actions tab
   - 確保所有 workflow 都是綠色 ✅

4. **提交作業**
   - Repository URL
   - 簡短說明（200 字）
   - CI/CD 管線截圖

---

## 📚 參考資源

### 官方文檔
- [GitHub Actions 文檔](https://docs.github.com/en/actions)
- [CodeQL 文檔](https://codeql.github.com/docs/)
- [Snyk 文檔](https://docs.snyk.io/)
- [Trivy 文檔](https://aquasecurity.github.io/trivy/)

### 範例 Workflows
- [Python CI 範例](https://github.com/actions/starter-workflows/blob/main/ci/python-app.yml)
- [CodeQL 範例](https://github.com/github/codeql-action)
- [Container Scan 範例](https://github.com/aquasecurity/trivy-action)

### 學習資源
- 模組 5 理論：5.1, 5.2, 5.3
- 情境題庫：B01-B06（基礎）、C01-C03（組合）

---

## ❓ 常見問題

**Q1：可以使用 GitLab CI 或 Jenkins 嗎？**
A：本作業要求使用 GitHub Actions，因為這是模組 5 的核心內容。

**Q2：測試覆蓋率達不到 80% 怎麼辦？**
A：需要添加更多測試案例。重點測試關鍵業務邏輯，而非追求 100% 覆蓋率。

**Q3：Snyk 需要付費嗎？**
A：Snyk 有免費方案，對開源專案和個人使用足夠。

**Q4：部署到哪個平台？**
A：建議使用 Railway 或 Fly.io 的免費層。如果熟悉其他平台（Heroku, AWS）也可以。

**Q5：如何處理 Secrets？**
A：使用 GitHub Secrets 管理所有敏感資料。絕不在程式碼中硬編碼。

**Q6：CI 執行時間太長怎麼辦？**
A：使用 cache 優化依賴安裝、考慮並行執行、減少不必要的步驟。

**Q7：可以使用 AI 工具嗎？**
A：強烈建議！使用 Claude Code、Cursor、GitHub Copilot 輔助開發。但必須理解生成的程式碼。

---

## 📞 支援與協助

**遇到問題？**
1. 查看模組 5 理論內容和範例
2. 參考情境題庫的解決方案
3. 查閱官方文檔
4. 在課程討論區發問
5. 聯繫助教或講師

**評估時間軸**：
- 提交後 3 個工作日內完成評分
- 會提供詳細的反饋和改進建議

---

**祝你挑戰成功！記住：CI/CD 不只是技術，更是保護生產環境的安全網。** 🚀
