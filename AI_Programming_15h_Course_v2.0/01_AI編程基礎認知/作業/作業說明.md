# 模組 1 作業：AI 編程基礎認知

## 📋 作業概述

本作業旨在檢驗你對模組 1 核心概念的理解和應用能力，包括：
- 程式碼驗證能力
- 工具選擇決策
- 上下文工程實踐

**預計時間**：3-4 小時
**截止日期**：課程第 1 週結束
**提交方式**：GitHub Repository 或 Markdown 文件

---

## 🎯 作業目標

完成本作業後，你將能夠：
- ✅ 系統化審查 AI 生成的程式碼
- ✅ 為真實場景選擇合適的 AI 工具
- ✅ 設計完整的專案記憶系統
- ✅ 應用驗證清單進行程式碼審查

---

## 📝 作業內容

### 任務 1：程式碼安全審查（40 分）

#### 背景

你接手了一個電商專案的程式碼審查任務，需要檢查以下功能的安全性。

#### 待審查程式碼

**功能 1：使用者登入（Python + Flask）**
```python
from flask import Flask, request, jsonify
import hashlib
import sqlite3

app = Flask(__name__)

@app.route('/api/login', methods=['POST'])
def login():
    data = request.json
    username = data['username']
    password = data['password']

    # 查詢使用者
    conn = sqlite3.connect('users.db')
    query = f"SELECT * FROM users WHERE username = '{username}'"
    cursor = conn.execute(query)
    user = cursor.fetchone()

    if user:
        # 驗證密碼
        hashed = hashlib.md5(password.encode()).hexdigest()
        if user[2] == hashed:
            return jsonify({
                "success": True,
                "message": "Login successful",
                "user_id": user[0],
                "username": user[1],
                "email": user[3],
                "password_hash": user[2]
            })

    return jsonify({"success": False, "message": "Invalid credentials"})

if __name__ == '__main__':
    app.run(debug=True, host='0.0.0.0')
```

**功能 2：商品圖片上傳（JavaScript + Express）**
```javascript
const express = require('express');
const fs = require('fs');
const app = express();

app.use(express.json());

app.post('/api/upload-product-image', (req, res) => {
    const { filename, content } = req.body;

    // 儲存圖片
    const filepath = `./public/images/${filename}`;
    fs.writeFileSync(filepath, content, 'base64');

    res.json({
        success: true,
        url: `/images/${filename}`
    });
});

app.listen(3000, () => {
    console.log('Server running on port 3000');
});
```

**功能 3：商品搜尋快取（Python）**
```python
import requests

# 全域快取
search_cache = {}

def search_products(keyword, category=None, price_min=None, price_max=None):
    """搜尋商品"""
    # 建立快取鍵
    cache_key = f"{keyword}_{category}_{price_min}_{price_max}"

    # 檢查快取
    if cache_key in search_cache:
        return search_cache[cache_key]

    # 呼叫外部 API
    params = {
        'q': keyword,
        'category': category,
        'price_min': price_min,
        'price_max': price_max
    }
    response = requests.get('https://api.products.com/search', params=params)

    # 儲存快取
    result = response.json()
    search_cache[cache_key] = result

    return result
```

#### 任務要求

**第 1 步：識別問題（20 分）**

使用安全性驗證清單逐項檢查，找出**所有**安全問題：

| 檢查項目 | 功能 1 | 功能 2 | 功能 3 | 具體問題描述 |
|---------|--------|--------|--------|------------|
| SQL 注入 | □ | □ | □ | |
| XSS 攻擊 | □ | □ | □ | |
| 路徑遍歷 | □ | □ | □ | |
| 密碼安全 | □ | □ | □ | |
| 敏感資料洩露 | □ | □ | □ | |
| 錯誤處理缺失 | □ | □ | □ | |
| 記憶體洩漏 | □ | □ | □ | |
| 其他問題 | □ | □ | □ | |

**評分標準**：
- 找出所有嚴重安全問題（SQL 注入、密碼、資料洩露）：15 分
- 找出錯誤處理和資源管理問題：5 分

---

**第 2 步：提供修復方案（20 分）**

為每個功能提供完整的修復程式碼，包括：
- 安全性改進
- 錯誤處理
- 程式碼品質優化

**提交格式**：
```markdown
## 功能 1 修復方案

### 問題清單
1. **SQL 注入漏洞**（嚴重）
   - 位置：第 15 行
   - 原因：字串拼接 SQL 查詢
   - 影響：攻擊者可讀取/刪除資料庫資料

2. ...

### 修復程式碼
```python
# 完整的修復版本
```

### 驗證方法
- 單元測試
- 安全掃描工具（Bandit）
```

**評分標準**：
- 修復所有安全問題：10 分
- 添加完整的錯誤處理：5 分
- 程式碼品質（命名、類型提示、文檔）：5 分

---

### 任務 2：工具選擇與工作流程設計（30 分）

#### 背景

你的公司（50 人研發團隊）正在評估 AI 編程工具，需要為以下 3 個場景設計完整的工具鏈和工作流程。

#### 場景 A：日常開發

**團隊資訊**：
- 規模：10 人前端團隊（React + TypeScript）
- 專案：SaaS 平台儀表板
- 任務：每天開發小型功能和修 bug
- 需求：快速補全、即時建議、程式碼片段生成

**預算**：$150/月

#### 場景 B：大型重構專案

**團隊資訊**：
- 規模：5 人後端團隊（Python + FastAPI）
- 專案：舊版 API 升級（v1 → v2）
- 任務：修改 80+ 檔案，確保一致性
- 需求：複雜工作流程編排、跨檔案分析、專家級審查

**預算**：$200/月

#### 場景 C：新專案快速 Onboarding

**團隊資訊**：
- 規模：2 人新加入團隊
- 專案：開源專案（Django，30,000+ 行）
- 任務：1 週內理解架構並開始貢獻
- 需求：快速全局理解、架構分析、知識萃取

**預算**：$100/月

---

#### 任務要求

**第 1 步：工具選擇方案（15 分）**

為每個場景設計工具鏈，包括：

| 場景 | 主要工具 | 輔助工具 | 成本分配 | 選擇理由 |
|------|---------|---------|---------|---------|
| A | | | | |
| B | | | | |
| C | | | | |

**評分標準**：
- 工具選擇合理性：6 分
- 成本控制（在預算內）：3 分
- 理由充分：6 分

---

**第 2 步：工作流程設計（15 分）**

為**場景 B**（大型重構）設計完整的工作流程：

```markdown
## 大型重構工作流程設計

### 階段 1：探索（Explore）
**時間**：1 天
**工具**：
**任務**：
**產出**：

### 階段 2：規劃（Plan）
**時間**：
**工具**：
**任務**：
**產出**：

### 階段 3：編碼（Code）
**時間**：
**工具**：
**任務**：
**產出**：

### 階段 4：驗證（Verify）
**時間**：
**工具**：
**任務**：
**產出**：

### 風險控制
- 如何確保不遺漏檔案？
- 如何確保一致性？
- 如何回退？

### 品質保證
- 審查流程
- 測試策略
- 文檔更新
```

**評分標準**：
- 流程完整性：6 分
- 風險控制：5 分
- 品質保證：4 分

---

### 任務 3：專案記憶系統設計（30 分）

#### 背景

你開始一個新專案，需要從零建立完整的專案記憶系統（CLAUDE.md）。

#### 專案資訊

**專案名稱**：智能待辦事項系統
**技術棧**：
- 後端：FastAPI (Python 3.10+)
- 資料庫：PostgreSQL 14 + Redis 7
- 前端：React + TypeScript
- 部署：Docker + Kubernetes

**核心功能**：
- 待辦事項 CRUD
- 標籤系統
- 優先級管理
- 提醒通知
- AI 智能排程

**架構原則**：
1. RESTful API 設計
2. 資料庫查詢必須用參數化查詢
3. 所有 API 回應必須包含 request_id
4. 錯誤記錄到 ELK Stack

**編碼規範**：
- Python：Black (line-length=88) + mypy (strict)
- TypeScript：ESLint + Prettier
- 測試覆蓋率 ≥ 80%
- 所有函數必須有 docstring

**已知常見問題**：
1. **問題**：Redis 連線池耗盡
   **解決**：設定 `REDIS_POOL_SIZE=50, REDIS_TIMEOUT=5`

2. **問題**：前端 CORS 錯誤
   **解決**：後端設定 `CORS(allow_origins=['http://localhost:3000'])`

---

#### 任務要求

**第 1 步：設計 CLAUDE.md 結構（10 分）**

列出完整的章節結構，並說明每個章節的用途：

```markdown
## CLAUDE.md 結構設計

### 必須包含的章節
1. 專案概述
   - 用途：讓 AI 理解專案目標
   - 內容：2-3 句話描述

2. ...

### 可選包含的章節
...

### 不包含的內容（說明理由）
...
```

**評分標準**：
- 結構完整性：5 分
- 優先級合理：3 分
- 理由充分：2 分

---

**第 2 步：撰寫完整的 CLAUDE.md（15 分）**

基於上述專案資訊，撰寫完整的 CLAUDE.md 檔案。

**要求**：
- 包含所有必要章節
- 至少 3 個程式碼範例
- 至少 2 個 API 契約定義
- 總長度 < 1000 行

**評分標準**：
- 內容完整性：6 分
- 資訊準確性：5 分
- 範例品質：4 分

---

**第 3 步：驗證效果（5 分）**

假設你用 Claude Code 載入這個 CLAUDE.md，請說明：

```markdown
## 驗證計劃

### 測試案例 1：生成新 API 端點
**提示詞**：
> 實作一個新的 API 端點：GET /api/todos/stats
> 返回待辦事項統計資訊

**預期結果**：
- 符合 RESTful 設計
- 使用參數化查詢
- 回應包含 request_id
- 有完整的錯誤處理
- 有 docstring 和類型提示

### 測試案例 2：...

### 如何驗證首次正確率？
...
```

**評分標準**：
- 測試案例設計：3 分
- 驗證方法：2 分

---

## 📤 提交要求

### 提交格式

**方式 1：GitHub Repository（推薦）**
```
repo/
├── README.md（作業說明）
├── task1_code_review/
│   ├── problems.md（問題清單）
│   ├── fixed_code/（修復後的程式碼）
│   └── verification.md（驗證報告）
├── task2_tool_selection/
│   ├── tool_chain_design.md
│   └── workflow_design.md
└── task3_claude_md/
    ├── structure_design.md
    ├── CLAUDE.md
    └── verification_plan.md
```

**方式 2：單一 Markdown 文件**
- 檔名：`module1_assignment_[你的名字].md`
- 包含所有任務的完整答案

---

### 提交檢查清單

**任務 1**：
- [ ] 找出所有嚴重安全問題
- [ ] 提供完整的修復程式碼
- [ ] 程式碼能正常執行
- [ ] 包含驗證方法

**任務 2**：
- [ ] 工具選擇在預算內
- [ ] 工作流程完整（探索→規劃→編碼→驗證）
- [ ] 包含風險控制和品質保證

**任務 3**：
- [ ] CLAUDE.md 結構完整
- [ ] 包含至少 3 個程式碼範例
- [ ] 包含至少 2 個 API 契約
- [ ] 總長度 < 1000 行
- [ ] 包含驗證計劃

---

## 📊 評分標準

### 總分：100 分

| 任務 | 分數 | 評分重點 |
|------|------|---------|
| 任務 1：程式碼安全審查 | 40 分 | 問題識別完整性、修復方案正確性 |
| 任務 2：工具選擇與工作流程 | 30 分 | 工具選擇合理性、流程設計完整性 |
| 任務 3：專案記憶系統設計 | 30 分 | 結構設計、內容品質、驗證方法 |

### 等級劃分

- **90-100 分**：卓越
  - 找出所有安全問題並提供高品質修復
  - 工具選擇和工作流程設計專業完整
  - CLAUDE.md 結構清晰、內容豐富

- **80-89 分**：優秀
  - 找出大部分安全問題（≥ 80%）
  - 工具選擇合理，工作流程基本完整
  - CLAUDE.md 包含所有必要章節

- **70-79 分**：良好
  - 找出主要安全問題（≥ 70%）
  - 工具選擇基本合理
  - CLAUDE.md 結構完整但內容需改進

- **60-69 分**：及格
  - 找出部分安全問題（≥ 60%）
  - 工具選擇有一定依據
  - CLAUDE.md 包含核心章節

- **< 60 分**：不及格
  - 需要重新學習模組 1 內容

---

## 💡 完成建議

### 時間分配

```
任務 1：90-120 分鐘
  - 問題識別：30 分鐘
  - 修復方案：60-90 分鐘

任務 2：60-90 分鐘
  - 工具選擇：30 分鐘
  - 工作流程設計：30-60 分鐘

任務 3：60-90 分鐘
  - 結構設計：20 分鐘
  - 撰寫 CLAUDE.md：40-60 分鐘
  - 驗證計劃：10 分鐘

總計：3-5 小時
```

---

### 資源參考

**安全性檢查**：
- 模組 1 理論：`1.1_AI輔助開發現狀解析.md`
- 情境題庫：`情境題庫/基礎級/S1.1, S1.4`
- 學習資源：`學習資源/A - 安全漏洞識別`

**工具選擇**：
- 模組 1 理論：`1.2_三大工具哲學對比.md`
- 情境題庫：`情境題庫/基礎級/S1.2`
- 學習資源：`學習資源/B - 工具選擇決策`

**上下文工程**：
- 模組 1 理論：`1.3_上下文工程第一性原理.md`
- 情境題庫：`情境題庫/基礎級/S1.3`
- 學習資源：`學習資源/C - 上下文工程`

---

### 常見問題

**Q1：可以使用 AI 工具完成作業嗎？**

A：可以，但請注意：
- 使用 AI 生成的程式碼必須經過你的審查和理解
- 必須在提交中說明哪些部分使用了 AI 輔助
- 評分會考慮你對 AI 產出的理解和優化能力

**建議做法**：
1. 先獨立思考和嘗試
2. 遇到困難時使用 AI 輔助
3. 審查 AI 的產出
4. 記錄學習過程

---

**Q2：修復後的程式碼需要能執行嗎？**

A：是的。請確保：
- 程式碼語法正確
- 邏輯完整
- 能通過基本測試

如果需要外部依賴，請在 README 中說明如何安裝和執行。

---

**Q3：CLAUDE.md 可以超過 1000 行嗎？**

A：不建議。過長的 CLAUDE.md 會：
- 占用過多上下文空間
- 降低可讀性
- 包含冗餘資訊

建議：
- 聚焦核心資訊
- 使用簡潔的描述
- 程式碼範例精簡但完整

---

**Q4：如何驗證 CLAUDE.md 的效果？**

A：可以：
1. 使用 Claude Code 載入 CLAUDE.md
2. 生成測試程式碼
3. 檢查是否符合規範
4. 記錄首次正確率

如果沒有 Claude Code，可以：
- 設計理論測試案例
- 說明預期結果
- 對比有無 CLAUDE.md 的差異

---

## 🎓 學習成果

完成本作業後，你將能夠：

**程式碼驗證能力**：
- ✅ 系統化檢查安全漏洞
- ✅ 提供專業的修復方案
- ✅ 建立個人的驗證清單

**工具選擇能力**：
- ✅ 為不同場景選擇合適的工具
- ✅ 設計完整的工作流程
- ✅ 控制成本和效益

**上下文工程能力**：
- ✅ 設計清晰的專案記憶結構
- ✅ 撰寫高品質的 CLAUDE.md
- ✅ 驗證上下文工程的效果

---

**作業版本**：v1.0
**發布日期**：2025-01-30
**適用模組**：模組 1 - AI 編程基礎認知

**祝你作業順利！如有疑問，請參考課程資料或諮詢講師。**
